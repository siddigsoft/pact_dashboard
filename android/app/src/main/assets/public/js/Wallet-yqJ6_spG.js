import{r as o,j as e,v as Ae,ap as Ee,X as oe,o as Ve,l as Ne,f as ae,b5 as Ye,t as ve,aR as Ge,V as Ke,aX as Ze,al as De,W as Se,a5 as Qe,Z as re,b9 as le,p as ke,T as je,g as ne,q as Me,i as Je,bO as et,be as tt,b as st}from"./react-core-B8kFjp2k.js";import{C as N,I as S,B as H,f as C,g as A,D as Be,$ as He,l as Pe,m as $e,n as Xe,b as w,e as at,a8 as rt,T as Te,i as We,j as T,k as z,h as V}from"./index-PwDgWEVM.js";import{T as ie,a as de,b as B,c as b,d as ce,e as g}from"./table-CZ8ZB6wW.js";import{L as D}from"./label-C4lDws8j.js";import{T as lt}from"./textarea-BpQMf5eL.js";import{S as xe,a as ue,b as he,c as pe,d as v}from"./select-CXX5Q_V1.js";import{P as q}from"./progress-vMwTbqUI.js";import{E as Ie,a as Le}from"./jspdf-rld7HkB6.js";import{o as j,O as fe,s as Re,e as Fe,H as nt}from"./date-utils-YarVESQS.js";import"./vendor-VlxgVHMv.js";import"./docs-D2Yi4cpO.js";import"./react-dom-BLwj5vIO.js";import"./router-CKy9yO3R.js";import"./query-CJ0Bt4ph.js";import"./supabase-CwPDIVMD.js";import"./xlsx-CBxwqXDA.js";import"./forms-CESK2FDA.js";import"./radix-ui-C2DV4xtt.js";import"./radix-dialogs-CnlmQBMC.js";import"./radix-menus-CPezQVZk.js";function it({onSearch:u,onClear:i,filters:d}){const[l,s]=o.useState(""),[c,n]=o.useState("all"),[m,k]=o.useState(""),[h,a]=o.useState(""),[p,L]=o.useState(""),[W,R]=o.useState("");o.useEffect(()=>{d&&Object.keys(d).length===0&&(s(""),n("all"),k(""),a(""),L(""),R(""))},[d]);const[O,Y]=o.useState(!1),G=()=>{const x={};l&&(x.searchTerm=l),c!=="all"&&(x.type=c),m&&(x.minAmount=parseFloat(m)),h&&(x.maxAmount=parseFloat(h)),p&&(x.startDate=p),W&&(x.endDate=W),u(x)},K=()=>{s(""),n("all"),k(""),a(""),L(""),R(""),i()},X=[l,c!=="all",m,h,p,W].filter(Boolean).length;return e.jsx(N,{className:"bg-gradient-to-br from-slate-900/80 to-blue-900/80 border-blue-500/30 backdrop-blur-xl shadow-[0_0_20px_rgba(59,130,246,0.2)]",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-400"}),e.jsx(S,{value:l,onChange:x=>s(x.target.value),placeholder:"Search by description, reference, or site visit...",className:"pl-10 bg-slate-900/50 border-blue-500/30 text-blue-100 placeholder:text-blue-300/40 focus:border-blue-400 focus:ring-2 focus:ring-blue-400/20","data-testid":"input-transaction-search"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("button",{type:"button",onClick:()=>Y(!O),className:"px-3 py-1.5 text-sm rounded-md bg-gradient-to-r from-blue-600/20 to-purple-600/20 hover:from-blue-600/30 hover:to-purple-600/30 text-blue-300 border border-blue-500/30 inline-flex items-center gap-2 transition","data-testid":"button-toggle-advanced",children:[e.jsx(Ee,{className:"w-3 h-3"}),"Advanced",X>0&&e.jsx(H,{className:"bg-blue-500 text-white text-xs px-1.5 py-0.5",children:X})]}),X>0&&e.jsxs("button",{type:"button",onClick:K,className:"px-3 py-1.5 text-sm rounded-md bg-red-900/20 hover:bg-red-900/30 text-red-300 border border-red-500/30 inline-flex items-center gap-2 transition","data-testid":"button-clear-filters",children:[e.jsx(oe,{className:"w-3 h-3"}),"Clear"]}),e.jsxs("button",{type:"button",onClick:G,className:"px-4 py-1.5 text-sm rounded-md bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border border-blue-400/50 shadow-[0_0_15px_rgba(59,130,246,0.3)] transition inline-flex items-center gap-2","data-testid":"button-apply-search",children:[e.jsx(Ae,{className:"w-3 h-3"}),"Search"]})]}),O&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-blue-500/20 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"text-blue-300 text-sm",children:"Transaction Type"}),e.jsxs(xe,{value:c,onValueChange:n,children:[e.jsx(ue,{className:"bg-slate-900/50 border-blue-500/30 text-blue-100","data-testid":"select-transaction-type",children:e.jsx(he,{})}),e.jsxs(pe,{children:[e.jsx(v,{value:"all",children:"All Types"}),e.jsx(v,{value:"site_visit_fee",children:"Site Visit Fee"}),e.jsx(v,{value:"withdrawal",children:"Withdrawal"}),e.jsx(v,{value:"bonus",children:"Bonus"}),e.jsx(v,{value:"penalty",children:"Penalty"}),e.jsx(v,{value:"adjustment",children:"Adjustment"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{className:"text-blue-300 text-sm flex items-center gap-2",children:[e.jsx(Ve,{className:"w-3 h-3"}),"Amount Range"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(S,{type:"number",placeholder:"Min",value:m,onChange:x=>k(x.target.value),className:"bg-slate-900/50 border-blue-500/30 text-blue-100 placeholder:text-blue-300/40","data-testid":"input-min-amount"}),e.jsx(S,{type:"number",placeholder:"Max",value:h,onChange:x=>a(x.target.value),className:"bg-slate-900/50 border-blue-500/30 text-blue-100 placeholder:text-blue-300/40","data-testid":"input-max-amount"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(D,{className:"text-blue-300 text-sm flex items-center gap-2",children:[e.jsx(Ne,{className:"w-3 h-3"}),"Date Range"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(S,{type:"date",value:p,onChange:x=>L(x.target.value),className:"bg-slate-900/50 border-blue-500/30 text-blue-100","data-testid":"input-start-date"}),e.jsx(S,{type:"date",value:W,onChange:x=>R(x.target.value),className:"bg-slate-900/50 border-blue-500/30 text-blue-100","data-testid":"input-end-date"})]})]})]})]})})}function dt(){const[u,i]=o.useState([{id:"1",type:"bank",name:"Bank of Khartoum",details:"Account: ***4532",isDefault:!0}]),[d,l]=o.useState(!1),[s,c]=o.useState({type:"bank",name:"",accountNumber:"",bankName:"",phoneNumber:"",cardNumber:""}),n=a=>{switch(a){case"bank":return e.jsx(Ze,{className:"w-5 h-5 text-blue-400"});case"mobile_money":return e.jsx(Ke,{className:"w-5 h-5 text-green-400"});case"card":return e.jsx(ae,{className:"w-5 h-5 text-purple-400"});default:return e.jsx(ae,{className:"w-5 h-5"})}},m=()=>{const a=(u.length+1).toString();let p="";s.type==="bank"?p=`Account: ***${s.accountNumber.slice(-4)}`:s.type==="mobile_money"?p=`Phone: ${s.phoneNumber}`:p=`Card: ***${s.cardNumber.slice(-4)}`,i([...u,{id:a,type:s.type,name:s.name||s.bankName,details:p,isDefault:!1}]),c({type:"bank",name:"",accountNumber:"",bankName:"",phoneNumber:"",cardNumber:""}),l(!1)},k=a=>{i(u.filter(p=>p.id!==a))},h=a=>{i(u.map(p=>({...p,isDefault:p.id===a})))};return e.jsxs(N,{className:"bg-gradient-to-br from-slate-900/80 to-purple-900/80 border-purple-500/30 backdrop-blur-xl shadow-[0_0_20px_rgba(168,85,247,0.2)]",children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(A,{className:"text-purple-100 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-lg",children:e.jsx(ae,{className:"w-5 h-5 text-purple-400"})}),"Payment Methods"]}),e.jsxs(Be,{open:d,onOpenChange:l,children:[e.jsx(He,{asChild:!0,children:e.jsxs("button",{type:"button",className:"px-3 py-1.5 text-sm rounded-md bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white border border-purple-400/50 shadow-[0_0_15px_rgba(168,85,247,0.3)] transition inline-flex items-center gap-2","data-testid":"button-add-payment-method",children:[e.jsx(Ye,{className:"w-3 h-3"}),"Add Method"]})}),e.jsxs(Pe,{className:"bg-gradient-to-br from-slate-900 via-purple-950 to-blue-950 border-purple-500/30 shadow-[0_0_50px_rgba(168,85,247,0.3)]",children:[e.jsx($e,{children:e.jsx(Xe,{className:"text-purple-100",children:"Add Payment Method"})}),e.jsxs("div",{className:"space-y-4 cyber-dialog-form",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Method Type"}),e.jsxs(xe,{value:s.type,onValueChange:a=>c({...s,type:a}),children:[e.jsx(ue,{"data-testid":"select-payment-type",children:e.jsx(he,{})}),e.jsxs(pe,{children:[e.jsx(v,{value:"bank",children:"Bank Transfer"}),e.jsx(v,{value:"mobile_money",children:"Mobile Money"}),e.jsx(v,{value:"card",children:"Debit/Credit Card"})]})]})]}),s.type==="bank"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Bank Name"}),e.jsx(S,{value:s.bankName,onChange:a=>c({...s,bankName:a.target.value}),placeholder:"e.g., Bank of Khartoum","data-testid":"input-bank-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Account Number"}),e.jsx(S,{value:s.accountNumber,onChange:a=>c({...s,accountNumber:a.target.value}),placeholder:"Account number","data-testid":"input-account-number"})]})]}),s.type==="mobile_money"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Provider Name"}),e.jsx(S,{value:s.name,onChange:a=>c({...s,name:a.target.value}),placeholder:"e.g., Zain Cash, MTN","data-testid":"input-provider-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Phone Number"}),e.jsx(S,{value:s.phoneNumber,onChange:a=>c({...s,phoneNumber:a.target.value}),placeholder:"+249 XXX XXX XXX","data-testid":"input-phone-number"})]})]}),s.type==="card"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Cardholder Name"}),e.jsx(S,{value:s.name,onChange:a=>c({...s,name:a.target.value}),placeholder:"Name on card","data-testid":"input-cardholder-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Card Number"}),e.jsx(S,{value:s.cardNumber,onChange:a=>c({...s,cardNumber:a.target.value}),placeholder:"XXXX XXXX XXXX XXXX",maxLength:16,"data-testid":"input-card-number"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-purple-500/20",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 rounded-md bg-slate-800/50 hover:bg-slate-800/70 text-purple-200 border border-purple-500/20 transition","data-testid":"button-cancel-payment",children:"Cancel"}),e.jsx("button",{type:"button",onClick:m,disabled:!s.name&&!s.bankName,className:"px-4 py-2 rounded-md bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white border border-purple-400/50 shadow-[0_0_15px_rgba(168,85,247,0.3)] disabled:opacity-50 disabled:cursor-not-allowed transition","data-testid":"button-save-payment",children:"Add Method"})]})]})]})]})]})}),e.jsxs(w,{className:"space-y-3",children:[u.map(a=>e.jsx("div",{className:"p-3 bg-gradient-to-r from-slate-900/50 to-purple-900/20 border border-purple-500/20 rounded-lg hover:border-purple-400/40 transition backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:n(a.type)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-purple-100",children:a.name}),a.isDefault&&e.jsxs(H,{className:"bg-green-500/20 text-green-300 border-green-500/30 text-xs",children:[e.jsx(ve,{className:"w-3 h-3 mr-1"}),"Default"]})]}),e.jsx("p",{className:"text-sm text-purple-300/60",children:a.details})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!a.isDefault&&e.jsx("button",{type:"button",onClick:()=>h(a.id),className:"px-2 py-1 text-xs rounded bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 border border-purple-500/30 transition","data-testid":`button-set-default-${a.id}`,children:"Set Default"}),e.jsx("button",{type:"button",onClick:()=>k(a.id),className:"p-1.5 rounded hover:bg-red-500/20 text-red-400 hover:text-red-300 transition","data-testid":`button-remove-${a.id}`,children:e.jsx(Ge,{className:"w-4 h-4"})})]})]})},a.id)),u.length===0&&e.jsxs("div",{className:"text-center py-8 text-purple-300/40",children:[e.jsx(ae,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No payment methods added"})]})]})]})}const $=(u,i)=>new Intl.NumberFormat("en-SD",{style:"currency",currency:i,minimumFractionDigits:2,maximumFractionDigits:2}).format(u),ct=(u,i,d)=>{const l=["Date","Type","Description","Amount","Currency","Balance Before","Balance After","Reference"],s=u.map(h=>{var a,p;return[j(new Date(h.createdAt),"yyyy-MM-dd HH:mm"),h.type,h.description||"-",h.amount.toFixed(2),h.currency,((a=h.balanceBefore)==null?void 0:a.toFixed(2))||"-",((p=h.balanceAfter)==null?void 0:p.toFixed(2))||"-",h.id.substring(0,8)]}),c=[l.join(","),...s.map(h=>h.map(a=>`"${a}"`).join(","))].join(`
`),n=new Blob([c],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),k=URL.createObjectURL(n);m.setAttribute("href",k),m.setAttribute("download",`wallet_transactions_${j(new Date,"yyyy-MM-dd")}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},ot=(u,i,d,l)=>{const s=new Ie;s.setFontSize(20),s.setTextColor(59,130,246),s.text("PACT Wallet Statement",14,20),s.setFontSize(10),s.setTextColor(100,100,100),s.text(`Generated: ${j(new Date,"PPpp")}`,14,28),i&&(s.setFontSize(12),s.setTextColor(0,0,0),s.text(`Current Balance: ${$(i.balances[d]||0,d)}`,14,38),s.text(`Total Earned: ${$(i.totalEarned,d)}`,14,45),s.text(`Total Withdrawn: ${$(i.totalWithdrawn,d)}`,14,52));const c=u.map(n=>[j(new Date(n.createdAt),"yyyy-MM-dd HH:mm"),n.type,n.description||"-",$(n.amount,n.currency),n.balanceBefore?$(n.balanceBefore,n.currency):"-",n.balanceAfter?$(n.balanceAfter,n.currency):"-"]);Le(s,{startY:i?60:35,head:[["Date","Type","Description","Amount","Before","After"]],body:c,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:[255,255,255]},styles:{fontSize:8},columnStyles:{0:{cellWidth:32},1:{cellWidth:25},2:{cellWidth:45},3:{cellWidth:25,halign:"right"},4:{cellWidth:25,halign:"right"},5:{cellWidth:25,halign:"right"}}}),s.save(`wallet_statement_${j(new Date,"yyyy-MM-dd")}.pdf`)},mt=(u,i,d)=>{const l=["Date","Amount","Currency","Status","Reason","Method","Requested At","Approved At","Supervisor Notes"],s=u.map(a=>[j(new Date(a.createdAt),"yyyy-MM-dd HH:mm"),a.amount.toFixed(2),a.currency,a.status.toUpperCase(),a.requestReason||"-",a.paymentMethod||"-",j(new Date(a.createdAt),"yyyy-MM-dd HH:mm"),a.approvedAt?j(new Date(a.approvedAt),"yyyy-MM-dd HH:mm"):"-",a.supervisorNotes||"-"]),c=[l.join(","),...s.map(a=>a.map(p=>`"${p}"`).join(","))].join(`
`),n=new Blob([c],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),k=URL.createObjectURL(n);m.setAttribute("href",k);const h=i?`_${i}`:"";m.setAttribute("download",`withdrawals${h}_${j(new Date,"yyyy-MM-dd")}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},xt=(u,i,d)=>{const l=new Ie;l.setFontSize(20),l.setTextColor(168,85,247),l.text("PACT Withdrawal History",14,20),l.setFontSize(10),l.setTextColor(100,100,100),l.text(`Generated: ${j(new Date,"PPpp")}`,14,28),i&&l.text(`Filter: ${i.toUpperCase()}`,14,34);const s=u.map(n=>[j(new Date(n.createdAt),"yyyy-MM-dd"),$(n.amount,n.currency),n.status.toUpperCase(),n.requestReason||"-",n.paymentMethod||"-",n.approvedAt?j(new Date(n.approvedAt),"yyyy-MM-dd"):"-"]);Le(l,{startY:i?40:35,head:[["Date","Amount","Status","Reason","Method","Approved"]],body:s,theme:"grid",headStyles:{fillColor:[168,85,247],textColor:[255,255,255]},styles:{fontSize:9},columnStyles:{0:{cellWidth:28},1:{cellWidth:28,halign:"right"},2:{cellWidth:25},3:{cellWidth:45},4:{cellWidth:30},5:{cellWidth:28}}});const c=i?`_${i}`:"";l.save(`withdrawals${c}_${j(new Date,"yyyy-MM-dd")}.pdf`)},me="SDG",_=(u,i=me)=>new Intl.NumberFormat("en-SD",{style:"currency",currency:i,minimumFractionDigits:2,maximumFractionDigits:2}).format(u),Rt=()=>{const{currentUser:u}=at(),{wallet:i,transactions:d,withdrawalRequests:l,stats:s,loading:c,createWithdrawalRequest:n,cancelWithdrawalRequest:m,getBalance:k,refreshWallet:h,refreshTransactions:a,refreshWithdrawalRequests:p}=rt(),[L,W]=o.useState(!1),[R,O]=o.useState(""),[Y,G]=o.useState(""),[K,X]=o.useState(""),[x,ye]=o.useState("all"),[Z,we]=o.useState("all"),[P,_e]=o.useState("all"),[y,be]=o.useState({}),Q=k(me),Oe=async()=>{const t=parseFloat(R);t<=0||t>Q||(await n(t,Y,K),W(!1),O(""),G(""),X(""))},Ue=async()=>{await Promise.all([h(),a(),p()])},ze=()=>{be({}),ye("all"),we("all"),_e("all")},Ce=t=>{switch(t){case"site_visit_fee":return e.jsx(tt,{className:"w-4 h-4 text-green-600"});case"withdrawal":return e.jsx(et,{className:"w-4 h-4 text-red-600"});case"bonus":return e.jsx(je,{className:"w-4 h-4 text-blue-600"});case"penalty":return e.jsx(le,{className:"w-4 h-4 text-orange-600"});default:return e.jsx(Ve,{className:"w-4 h-4 text-gray-600"})}},qe=t=>{switch(t){case"pending":return e.jsxs(H,{variant:"outline",className:"gap-1",children:[e.jsx(Me,{className:"w-3 h-3"}),"Pending"]});case"approved":return e.jsxs(H,{variant:"default",className:"gap-1 bg-green-600",children:[e.jsx(st,{className:"w-3 h-3"}),"Approved"]});case"rejected":return e.jsxs(H,{variant:"destructive",className:"gap-1",children:[e.jsx(oe,{className:"w-3 h-3"}),"Rejected"]});case"cancelled":return e.jsx(H,{variant:"secondary",className:"gap-1",children:"Cancelled"});default:return e.jsx(H,{variant:"outline",children:t})}},J=o.useMemo(()=>{let t=[...d];if(y.searchTerm){const r=y.searchTerm.toLowerCase();t=t.filter(f=>{var E,I;return((E=f.description)==null?void 0:E.toLowerCase().includes(r))||f.id.toLowerCase().includes(r)||((I=f.siteVisitId)==null?void 0:I.toLowerCase().includes(r))})}if(y.type&&(t=t.filter(r=>r.type===y.type)),y.minAmount!==void 0&&(t=t.filter(r=>Math.abs(r.amount)>=y.minAmount)),y.maxAmount!==void 0&&(t=t.filter(r=>Math.abs(r.amount)<=y.maxAmount)),y.startDate){const r=new Date(y.startDate);t=t.filter(f=>new Date(f.createdAt)>=r)}if(y.endDate){const r=new Date(y.endDate);r.setHours(23,59,59,999),t=t.filter(f=>new Date(f.createdAt)<=r)}if(x!=="all"&&!y.type&&(t=t.filter(r=>r.type===x)),Z!=="all"&&!y.startDate&&!y.endDate){const r=new Date;let f,E=r;switch(Z){case"this_month":f=Re(r),E=Fe(r);break;case"last_month":f=Re(fe(r,1)),E=Fe(fe(r,1));break;case"last_3_months":f=fe(r,3);break;default:return t}t=t.filter(I=>nt(new Date(I.createdAt),{start:f,end:E}))}return t},[d,x,Z,y]),ge=o.useMemo(()=>{const t={};return d.filter(r=>r.type==="site_visit_fee").forEach(r=>{const f=j(new Date(r.createdAt),"MMM yyyy");t[f]=(t[f]||0)+r.amount}),Object.entries(t).sort(([r],[f])=>new Date(r).getTime()-new Date(f).getTime()).slice(-6)},[d]),ee=o.useMemo(()=>d.filter(t=>t.type==="site_visit_fee"&&t.siteVisitId).slice(0,10),[d]),M=l.filter(t=>t.status==="pending"),F=l.filter(t=>t.status==="approved"),te=l.filter(t=>t.status==="rejected"),U=l.length>0?F.length/l.length*100:0,se=o.useMemo(()=>{switch(P){case"pending":return M;case"approved":return F;case"rejected":return te;default:return l}},[P,l,M,F,te]);return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{className:"w-5 h-5 animate-spin text-blue-400"}),e.jsx("p",{className:"text-blue-300/70",children:"Synchronizing wallet data..."})]})}):e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-950 via-blue-950 to-purple-950 -z-10",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(59,130,246,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(59,130,246,0.05)_1px,transparent_1px)] bg-[size:50px_50px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000,transparent)]"}),e.jsx("div",{className:"absolute top-20 left-20 w-96 h-96 bg-blue-500/20 rounded-full blur-[120px] animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-purple-500/20 rounded-full blur-[120px] animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"relative space-y-6 p-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-cyan-500/10 rounded-2xl blur-xl"}),e.jsx("div",{className:"relative bg-gradient-to-r from-slate-900/90 via-blue-900/90 to-purple-900/90 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-[0_0_30px_rgba(59,130,246,0.3)]",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl shadow-lg shadow-blue-500/50",children:e.jsx(Se,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent flex items-center gap-3",children:["My Wallet",e.jsxs(H,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white border-0 animate-pulse",children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"}),"ACTIVE"]})]}),e.jsx("p",{className:"text-blue-300/80 mt-1 text-lg",children:"Cyber-Financial Command Center"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("button",{type:"button",onClick:Ue,className:"px-3 py-1.5 text-sm rounded-md bg-gradient-to-r from-slate-900/50 to-blue-900/50 border border-blue-500/30 text-blue-300 hover:border-blue-400 hover:shadow-[0_0_15px_rgba(59,130,246,0.3)] transition-all backdrop-blur-xl inline-flex items-center focus:outline-none focus:ring-2 focus:ring-blue-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":"button-refresh-wallet",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"REFRESH"]}),e.jsxs("button",{type:"button",onClick:()=>ct(J),className:"px-3 py-1.5 text-sm rounded-md bg-gradient-to-r from-green-900/50 to-emerald-900/50 border border-green-500/30 text-green-300 hover:border-green-400 hover:shadow-[0_0_15px_rgba(34,197,94,0.3)] transition-all backdrop-blur-xl inline-flex items-center focus:outline-none focus:ring-2 focus:ring-green-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":"button-export-csv",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs("button",{type:"button",onClick:()=>ot(J,i,me),className:"px-3 py-1.5 text-sm rounded-md bg-gradient-to-r from-red-900/50 to-pink-900/50 border border-red-500/30 text-red-300 hover:border-red-400 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)] transition-all backdrop-blur-xl inline-flex items-center focus:outline-none focus:ring-2 focus:ring-red-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":"button-export-pdf",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"PDF"]}),e.jsxs("button",{type:"button",onClick:ze,className:"px-3 py-1.5 text-sm rounded-md bg-gradient-to-r from-orange-900/50 to-amber-900/50 border border-orange-500/30 text-orange-300 hover:border-orange-400 hover:shadow-[0_0_15px_rgba(249,115,22,0.3)] transition-all backdrop-blur-xl inline-flex items-center focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":"button-clear-filters",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"CLEAR FILTERS"]}),e.jsxs(Be,{open:L,onOpenChange:W,children:[e.jsx(He,{asChild:!0,children:e.jsxs("button",{type:"button",className:"px-4 py-2 rounded-md bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white border-0 shadow-[0_0_20px_rgba(168,85,247,0.5)] transition-all inline-flex items-center focus:outline-none focus:ring-2 focus:ring-purple-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":"button-request-withdrawal",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"REQUEST WITHDRAWAL"]})}),e.jsxs(Pe,{children:[e.jsx($e,{children:e.jsx(Xe,{children:"Request Withdrawal"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(D,{htmlFor:"amount",children:["Amount (",me,")"]}),e.jsx(S,{id:"amount",type:"number",min:"0",step:"0.01",max:Q,value:R,onChange:t=>O(t.target.value),placeholder:"Enter amount","data-testid":"input-withdrawal-amount"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Available balance: ",_(Q)]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(D,{htmlFor:"reason",children:"Reason"}),e.jsx(lt,{id:"reason",value:Y,onChange:t=>G(t.target.value),placeholder:"Transportation costs, accommodation, etc.","data-testid":"input-withdrawal-reason"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(D,{htmlFor:"method",children:"Payment Method (Optional)"}),e.jsx(S,{id:"method",value:K,onChange:t=>X(t.target.value),placeholder:"Bank transfer, Mobile money, etc.","data-testid":"input-withdrawal-method"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-purple-500/20",children:[e.jsx("button",{type:"button",onClick:()=>W(!1),className:"px-4 py-2 rounded-md bg-slate-800/50 hover:bg-slate-800/70 text-purple-200 border border-purple-500/20 transition focus:outline-none focus:ring-2 focus:ring-purple-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":"button-cancel-withdrawal",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Oe,disabled:!R||parseFloat(R)<=0,className:"px-4 py-2 rounded-md bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white border border-purple-400/50 shadow-[0_0_15px_rgba(168,85,247,0.3)] disabled:opacity-50 disabled:cursor-not-allowed transition focus:outline-none focus:ring-2 focus:ring-purple-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":"button-submit-withdrawal",children:"Submit Request"})]})]})]})]})]})})]}),M.length>0&&e.jsx(N,{className:"bg-gradient-to-r from-orange-900/50 to-red-900/50 border-orange-500/40 backdrop-blur-xl shadow-[0_0_20px_rgba(251,146,60,0.2)]",children:e.jsxs(w,{className:"flex items-center gap-3 p-4",children:[e.jsx(ke,{className:"w-5 h-5 text-orange-400 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-orange-200",children:["You have ",M.length," pending withdrawal request",M.length!==1?"s":""]}),e.jsxs("p",{className:"text-xs text-orange-300/70 mt-0.5",children:["Total amount: ",_(M.reduce((t,r)=>t+r.amount,0))]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(N,{className:"bg-gradient-to-br from-slate-900/80 to-blue-900/80 border-blue-500/30 backdrop-blur-xl shadow-[0_0_20px_rgba(59,130,246,0.2)]",children:[e.jsxs(C,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium uppercase tracking-wide text-blue-300",children:"Current Balance"}),e.jsx(Se,{className:"w-5 h-5 text-blue-400"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-3xl font-bold tabular-nums bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:_(Q)}),e.jsx("p",{className:"text-xs text-blue-300/70 mt-1",children:"Available for withdrawal"})]})]}),e.jsxs(N,{className:"bg-gradient-to-br from-slate-900/80 to-purple-900/80 border-purple-500/30 backdrop-blur-xl shadow-[0_0_20px_rgba(168,85,247,0.2)]",children:[e.jsxs(C,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium uppercase tracking-wide text-purple-300",children:"Total Earned"}),e.jsx(je,{className:"w-5 h-5 text-green-400"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-3xl font-bold tabular-nums bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:_((s==null?void 0:s.totalEarned)||0)}),e.jsxs("p",{className:"text-xs text-purple-300/70 mt-1 flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"}),(s==null?void 0:s.completedSiteVisits)||0," site visits completed"]})]})]}),e.jsxs(N,{className:"bg-gradient-to-br from-slate-900/80 to-orange-900/80 border-orange-500/30 backdrop-blur-xl shadow-[0_0_20px_rgba(251,146,60,0.2)]",children:[e.jsxs(C,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium uppercase tracking-wide text-orange-300",children:"Pending Withdrawals"}),e.jsx(Me,{className:"w-5 h-5 text-orange-400 animate-pulse"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-3xl font-bold tabular-nums bg-gradient-to-r from-orange-400 to-red-400 bg-clip-text text-transparent",children:_((s==null?void 0:s.pendingWithdrawals)||0)}),e.jsxs("p",{className:"text-xs text-orange-300/70 mt-1",children:[M.length," request",M.length!==1?"s":""," awaiting approval"]})]})]}),e.jsxs(N,{className:"bg-gradient-to-br from-slate-900/80 to-cyan-900/80 border-cyan-500/30 backdrop-blur-xl shadow-[0_0_20px_rgba(34,211,238,0.2)]",children:[e.jsxs(C,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium uppercase tracking-wide text-cyan-300",children:"Total Withdrawn"}),e.jsx(le,{className:"w-5 h-5 text-cyan-400"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-3xl font-bold tabular-nums bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:_((s==null?void 0:s.totalWithdrawn)||0)}),e.jsxs("p",{className:"text-xs text-cyan-300/70 mt-1",children:[F.length," approved withdrawal",F.length!==1?"s":""]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(N,{className:"bg-gradient-to-br from-slate-900/80 to-green-900/80 border-green-500/30 backdrop-blur-xl shadow-[0_0_20px_rgba(34,197,94,0.2)]",children:[e.jsx(C,{className:"pb-3",children:e.jsx(A,{className:"text-sm font-medium uppercase tracking-wide text-green-300",children:"Withdrawal Success Rate"})}),e.jsxs(w,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-3xl font-bold tabular-nums bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:[U.toFixed(0),"%"]}),U>=80?e.jsx(ve,{className:"w-6 h-6 text-green-400 animate-pulse"}):e.jsx(ke,{className:"w-6 h-6 text-orange-400 animate-pulse"})]}),e.jsx(q,{value:U,className:"h-2"}),e.jsxs("p",{className:"text-xs text-green-300/70",children:[F.length," approved, ",te.length," rejected"]})]})]}),e.jsxs(N,{className:"bg-gradient-to-br from-slate-900/80 to-indigo-900/80 border-indigo-500/30 backdrop-blur-xl shadow-[0_0_20px_rgba(99,102,241,0.2)]",children:[e.jsx(C,{className:"pb-3",children:e.jsx(A,{className:"text-sm font-medium uppercase tracking-wide text-indigo-300",children:"Average Transaction"})}),e.jsxs(w,{children:[e.jsx("div",{className:"text-3xl font-bold tabular-nums bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:d.length>0?_(d.reduce((t,r)=>t+r.amount,0)/d.length):_(0)}),e.jsxs("p",{className:"text-xs text-indigo-300/70 mt-1",children:["Across ",(s==null?void 0:s.totalTransactions)||0," transactions"]})]})]}),e.jsxs(N,{className:"bg-gradient-to-br from-slate-900/80 to-emerald-900/80 border-emerald-500/30 backdrop-blur-xl shadow-[0_0_20px_rgba(16,185,129,0.2)]",children:[e.jsx(C,{className:"pb-3",children:e.jsx(A,{className:"text-sm font-medium uppercase tracking-wide text-emerald-300",children:"Activity Status"})}),e.jsxs(w,{className:"flex items-center gap-3",children:[e.jsx(Je,{className:"w-8 h-8 text-emerald-400 animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-emerald-300",children:"ACTIVE"}),e.jsxs("p",{className:"text-xs text-emerald-300/70",children:["Last transaction: ",d.length>0?j(new Date(d[0].createdAt),"MMM dd, yyyy"):"Never"]})]})]})]})]}),e.jsx(it,{onSearch:t=>be(t),onClear:()=>be({}),filters:y}),e.jsxs(Te,{defaultValue:"overview",className:"w-full",children:[e.jsxs(We,{className:"grid w-full grid-cols-5 bg-gradient-to-r from-slate-900/80 to-blue-900/80 border border-blue-500/30 backdrop-blur-xl p-1",children:[e.jsx(T,{value:"overview","data-testid":"tab-overview",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-[0_0_15px_rgba(59,130,246,0.5)] text-blue-300",children:"OVERVIEW"}),e.jsx(T,{value:"transactions","data-testid":"tab-transactions",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-[0_0_15px_rgba(59,130,246,0.5)] text-blue-300",children:"TRANSACTIONS"}),e.jsx(T,{value:"withdrawals","data-testid":"tab-withdrawals",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-[0_0_15px_rgba(59,130,246,0.5)] text-blue-300",children:"WITHDRAWALS"}),e.jsx(T,{value:"earnings","data-testid":"tab-earnings",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-[0_0_15px_rgba(59,130,246,0.5)] text-blue-300",children:"EARNINGS"}),e.jsx(T,{value:"activity","data-testid":"tab-activity",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-[0_0_15px_rgba(59,130,246,0.5)] text-blue-300",children:"ACTIVITY"})]}),e.jsxs(z,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(N,{children:[e.jsxs(C,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Recent Transactions"]}),e.jsx(V,{children:"Your latest 5 transactions"})]}),e.jsx(w,{children:d.slice(0,5).length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No transactions yet"})}):e.jsx("div",{className:"space-y-3",children:d.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[Ce(t.type),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium capitalize",children:t.type.replace("_"," ")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j(new Date(t.createdAt),"MMM dd, yyyy HH:mm")})]})]}),e.jsxs("div",{className:`text-sm font-semibold tabular-nums ${t.amount>=0?"text-green-600":"text-red-600"}`,children:[t.amount>=0?"+":"",_(t.amount,t.currency)]})]},t.id))})})]}),e.jsxs(N,{children:[e.jsxs(C,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Earnings by Month"]}),e.jsx(V,{children:"Last 6 months earnings trend"})]}),e.jsx(w,{children:ge.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No earnings data yet"})}):e.jsx("div",{className:"space-y-3",children:ge.map(([t,r])=>{const f=Math.max(...ge.map(([,I])=>I)),E=r/f*100;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:t}),e.jsx("span",{className:"font-semibold tabular-nums",children:_(r)})]}),e.jsx(q,{value:E,className:"h-2"})]},t)})})})]}),e.jsx(dt,{})]}),e.jsxs(N,{children:[e.jsxs(C,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Recent Site Visit Earnings"]}),e.jsx(V,{children:"Fees earned from your latest site visits"})]}),e.jsx(w,{children:ee.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No site visit earnings yet"})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(ie,{children:[e.jsx(de,{children:e.jsxs(B,{children:[e.jsx(b,{children:"Site Visit ID"}),e.jsx(b,{children:"Description"}),e.jsx(b,{children:"Date"}),e.jsx(b,{className:"text-right",children:"Amount"})]})}),e.jsx(ce,{children:ee.map(t=>{var r;return e.jsxs(B,{children:[e.jsxs(g,{className:"font-mono text-sm",children:[(r=t.siteVisitId)==null?void 0:r.slice(0,8),"..."]}),e.jsx(g,{className:"max-w-xs truncate",children:t.description||"Site visit fee"}),e.jsx(g,{className:"text-sm text-muted-foreground",children:j(new Date(t.createdAt),"MMM dd, yyyy")}),e.jsxs(g,{className:"text-right font-semibold tabular-nums text-green-600",children:["+",_(t.amount,t.currency)]})]},t.id)})})]})})})]})]}),e.jsx(z,{value:"transactions",className:"space-y-4",children:e.jsxs(N,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Transaction History"}),e.jsx(V,{children:"All your wallet transactions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(xe,{value:x,onValueChange:ye,children:[e.jsxs(ue,{className:"w-[160px]","data-testid":"select-transaction-type",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),e.jsx(he,{})]}),e.jsxs(pe,{children:[e.jsx(v,{value:"all",children:"All Types"}),e.jsx(v,{value:"site_visit_fee",children:"Site Visit Fees"}),e.jsx(v,{value:"withdrawal",children:"Withdrawals"}),e.jsx(v,{value:"bonus",children:"Bonuses"}),e.jsx(v,{value:"penalty",children:"Penalties"})]})]}),e.jsxs(xe,{value:Z,onValueChange:we,children:[e.jsxs(ue,{className:"w-[160px]","data-testid":"select-date-range",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),e.jsx(he,{})]}),e.jsxs(pe,{children:[e.jsx(v,{value:"all",children:"All Time"}),e.jsx(v,{value:"this_month",children:"This Month"}),e.jsx(v,{value:"last_month",children:"Last Month"}),e.jsx(v,{value:"last_3_months",children:"Last 3 Months"})]})]})]})]})}),e.jsx(w,{children:J.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No transactions found"})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(ie,{children:[e.jsx(de,{children:e.jsxs(B,{children:[e.jsx(b,{className:"w-[120px]",children:"Type"}),e.jsx(b,{children:"Description"}),e.jsx(b,{children:"Date"}),e.jsx(b,{className:"text-right",children:"Amount"}),e.jsx(b,{className:"text-right",children:"Balance After"})]})}),e.jsx(ce,{children:J.map(t=>e.jsxs(B,{"data-testid":`row-transaction-${t.id}`,children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[Ce(t.type),e.jsx("span",{className:"text-sm capitalize",children:t.type.replace("_"," ")})]})}),e.jsx(g,{className:"max-w-md truncate",children:t.description||"-"}),e.jsx(g,{className:"text-sm text-muted-foreground",children:j(new Date(t.createdAt),"MMM dd, yyyy HH:mm")}),e.jsxs(g,{className:`text-right font-semibold tabular-nums ${t.amount>=0?"text-green-600":"text-red-600"}`,children:[t.amount>=0?"+":"",_(t.amount,t.currency)]}),e.jsx(g,{className:"text-right tabular-nums font-medium",children:t.balanceAfter!==void 0?_(t.balanceAfter,t.currency):"-"})]},t.id))})]})})})]})}),e.jsx(z,{value:"withdrawals",className:"space-y-4",children:e.jsxs(N,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Withdrawal Requests"}),e.jsx(V,{children:"Manage and track your withdrawal requests"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>mt(se,P),className:"px-3 py-1.5 text-sm rounded-md bg-gradient-to-r from-green-900/50 to-emerald-900/50 border border-green-500/30 text-green-300 hover:border-green-400 hover:shadow-[0_0_15px_rgba(34,197,94,0.3)] transition-all backdrop-blur-xl inline-flex items-center focus:outline-none focus:ring-2 focus:ring-green-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":"button-export-withdrawals-csv",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs("button",{type:"button",onClick:()=>xt(se,P),className:"px-3 py-1.5 text-sm rounded-md bg-gradient-to-r from-red-900/50 to-pink-900/50 border border-red-500/30 text-red-300 hover:border-red-400 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)] transition-all backdrop-blur-xl inline-flex items-center focus:outline-none focus:ring-2 focus:ring-red-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":"button-export-withdrawals-pdf",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]})}),e.jsxs(w,{children:[e.jsx(Te,{value:P,onValueChange:t=>_e(t),className:"mb-4",children:e.jsxs(We,{className:"grid w-full max-w-md grid-cols-4",children:[e.jsxs(T,{value:"all","data-testid":"tab-withdrawals-all",children:["All (",l.length,")"]}),e.jsxs(T,{value:"pending","data-testid":"tab-withdrawals-pending",children:["Pending (",M.length,")"]}),e.jsxs(T,{value:"approved","data-testid":"tab-withdrawals-approved",children:["Approved (",F.length,")"]}),e.jsxs(T,{value:"rejected","data-testid":"tab-withdrawals-rejected",children:["Rejected (",te.length,")"]})]})}),se.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsxs("p",{children:["No ",P!=="all"?P:""," withdrawal requests found"]})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(ie,{children:[e.jsx(de,{children:e.jsxs(B,{children:[e.jsx(b,{children:"Status"}),e.jsx(b,{children:"Amount"}),e.jsx(b,{children:"Reason"}),e.jsx(b,{children:"Method"}),e.jsx(b,{children:"Requested"}),e.jsx(b,{children:"Supervisor Notes"}),e.jsx(b,{children:"Actions"})]})}),e.jsx(ce,{children:se.map(t=>e.jsxs(B,{"data-testid":`row-withdrawal-${t.id}`,children:[e.jsx(g,{children:qe(t.status)}),e.jsx(g,{className:"font-semibold tabular-nums",children:_(t.amount,t.currency)}),e.jsx(g,{className:"max-w-xs truncate",children:t.requestReason||"-"}),e.jsx(g,{className:"text-sm text-muted-foreground",children:t.paymentMethod||"-"}),e.jsx(g,{className:"text-sm text-muted-foreground",children:j(new Date(t.createdAt),"MMM dd, yyyy HH:mm")}),e.jsx(g,{className:"max-w-xs truncate",children:t.supervisorNotes||"-"}),e.jsx(g,{children:t.status==="pending"&&e.jsxs("button",{type:"button",onClick:()=>m(t.id),className:"px-3 py-1.5 text-sm rounded-md bg-red-900/20 hover:bg-red-900/30 text-red-300 border border-red-500/30 transition inline-flex items-center focus:outline-none focus:ring-2 focus:ring-red-400/70 focus:ring-offset-2 focus:ring-offset-slate-950","data-testid":`button-cancel-${t.id}`,children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"Cancel"]})})]},t.id))})]})})]})]})}),e.jsx(z,{value:"earnings",className:"space-y-4",children:e.jsxs(N,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Site Visit Earnings Breakdown"}),e.jsx(V,{children:"Detailed earnings from all completed site visits"})]}),e.jsx(w,{children:ee.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No site visit earnings yet"})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(ie,{children:[e.jsx(de,{children:e.jsxs(B,{children:[e.jsx(b,{children:"Site Visit ID"}),e.jsx(b,{children:"Description"}),e.jsx(b,{children:"Date Earned"}),e.jsx(b,{className:"text-right",children:"Amount"}),e.jsx(b,{className:"text-right",children:"Balance After"})]})}),e.jsx(ce,{children:ee.map(t=>{var r;return e.jsxs(B,{children:[e.jsxs(g,{className:"font-mono text-sm",children:[(r=t.siteVisitId)==null?void 0:r.slice(0,12),"..."]}),e.jsx(g,{className:"max-w-md truncate",children:t.description||"Site visit fee"}),e.jsx(g,{className:"text-sm text-muted-foreground",children:j(new Date(t.createdAt),"MMM dd, yyyy HH:mm")}),e.jsxs(g,{className:"text-right font-semibold tabular-nums text-green-600",children:["+",_(t.amount,t.currency)]}),e.jsx(g,{className:"text-right tabular-nums font-medium",children:t.balanceAfter!==void 0?_(t.balanceAfter,t.currency):"-"})]},t.id)})})]})})})]})}),e.jsx(z,{value:"activity",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(N,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Activity Summary"}),e.jsx(V,{children:"Your wallet activity overview"})]}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Transactions"})]}),e.jsx("span",{className:"text-lg font-bold tabular-nums",children:(s==null?void 0:s.totalTransactions)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Site Visits Completed"})]}),e.jsx("span",{className:"text-lg font-bold tabular-nums",children:(s==null?void 0:s.completedSiteVisits)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Withdrawal Requests"})]}),e.jsx("span",{className:"text-lg font-bold tabular-nums",children:l.length})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Approved Withdrawals"})]}),e.jsx("span",{className:"text-lg font-bold tabular-nums",children:F.length})]})]})]}),e.jsxs(N,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Performance Metrics"}),e.jsx(V,{children:"Key performance indicators"})]}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Earnings Growth"}),e.jsx("span",{className:"text-sm font-semibold tabular-nums",children:s!=null&&s.totalEarned&&s.totalEarned>0?"100%":"0%"})]}),e.jsx(q,{value:s!=null&&s.totalEarned&&s.totalEarned>0?100:0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Withdrawal Rate"}),e.jsxs("span",{className:"text-sm font-semibold tabular-nums",children:[s!=null&&s.totalEarned&&s.totalEarned>0?(s.totalWithdrawn/s.totalEarned*100).toFixed(0):0,"%"]})]}),e.jsx(q,{value:s!=null&&s.totalEarned&&s.totalEarned>0?s.totalWithdrawn/s.totalEarned*100:0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Approval Success"}),e.jsxs("span",{className:"text-sm font-semibold tabular-nums",children:[U.toFixed(0),"%"]})]}),e.jsx(q,{value:U,className:"h-2"})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Account Status: ",e.jsx("span",{className:"font-semibold text-green-600",children:"Active & Healthy"})]})})]})]})]})})]})]})};export{Rt as default};
