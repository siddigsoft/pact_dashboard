import{j as e,E as je,o as B,Y as T,T as X,b9 as J,a3 as z,ba as we,aA as G,r as M,I as V,bb as ae,bc as Ce,bd as Se,q as te,ag as K,aV as le,K as ie,be as re,a4 as De,a1 as Fe,U as ne,p as Ae,a0 as ce,ah as ke,bf as de,f as $,ae as U,h as H,bg as Te,aG as Pe,bh as Re,bi as Me}from"./react-core-B8kFjp2k.js";import{C as t,f as m,g as o,h as j,b as r,T as pe,i as ue,j as R,B as w,a as c,a8 as Be,R as Ee,r as Ve,e as Le,u as Ie,k as E,L as Ge,M as ze,N as Oe,O as W}from"./index-PwDgWEVM.js";import{P as S}from"./progress-vMwTbqUI.js";import{R as Y,P as $e,a as Ue,C as He,L as q,T as Q,B as We,b as ge,X as Ne,Y as fe,c as me,d as Je,e as oe}from"./charts-B79l2W3h.js";import{S as Ke,a as Ye,b as qe,c as Qe,d as I}from"./select-CXX5Q_V1.js";import{o as Xe}from"./date-utils-YarVESQS.js";import{T as be,a as ve,b as O,c as F,d as ye,e as A,f as Ze}from"./table-CZ8ZB6wW.js";import{F as _e}from"./FraudPreventionDashboard-DeXNzUdp.js";import{A as xe,b as he}from"./alert-BXWNuJnD.js";import{bo as es}from"./vendor-VlxgVHMv.js";import"./docs-D2Yi4cpO.js";import"./react-dom-BLwj5vIO.js";import"./jspdf-rld7HkB6.js";import"./router-CKy9yO3R.js";import"./query-CJ0Bt4ph.js";import"./supabase-CwPDIVMD.js";import"./xlsx-CBxwqXDA.js";import"./forms-CESK2FDA.js";import"./radix-ui-C2DV4xtt.js";import"./radix-dialogs-CnlmQBMC.js";import"./radix-menus-CPezQVZk.js";const ss=({transactions:v})=>{const p=v.filter(s=>s.type==="credit").reduce((s,n)=>s+n.amount,0),l=v.filter(s=>s.type==="debit").reduce((s,n)=>s+n.amount,0),u=p-l,f=Math.round(l/1e4*100),i="SDG",d=[{name:"Permit Fees",value:0},{name:"Transportation",value:0},{name:"Logistics",value:0},{name:"Other",value:0}];v.filter(s=>s.type==="debit"&&s.operationalCosts).forEach(s=>{var n,y,P,L;d[0].value+=((n=s.operationalCosts)==null?void 0:n.permitFees)||0,d[1].value+=((y=s.operationalCosts)==null?void 0:y.transportationFees)||0,d[2].value+=((P=s.operationalCosts)==null?void 0:P.logisticsFees)||0,d[3].value+=((L=s.operationalCosts)==null?void 0:L.otherFees)||0});const x=[{name:"Jan",income:0,expenses:0},{name:"Feb",income:0,expenses:0},{name:"Mar",income:0,expenses:0},{name:"Apr",income:0,expenses:0},{name:"May",income:0,expenses:0},{name:"Jun",income:0,expenses:0}];x[0].income=Math.round(p*.2),x[0].expenses=Math.round(l*.15),x[1].income=Math.round(p*.15),x[1].expenses=Math.round(l*.2),x[2].income=Math.round(p*.25),x[2].expenses=Math.round(l*.25),x[3].income=Math.round(p*.1),x[3].expenses=Math.round(l*.1),x[4].income=Math.round(p*.15),x[4].expenses=Math.round(l*.15),x[5].income=Math.round(p*.15),x[5].expenses=Math.round(l*.15);const C=["#0088FE","#00C49F","#FFBB28","#FF8042"],h=v.filter(s=>{var n;return s.type==="debit"&&((n=s.operationalCosts)==null?void 0:n.transportationFees)}).reduce((s,n)=>{var y;return s+(((y=n.operationalCosts)==null?void 0:y.transportationFees)||0)},0),D=v.filter(s=>s.siteVisitId).reduce((s,n)=>{var P;const y=n.siteVisitId||"unknown";return s[y]||(s[y]={id:y,totalAmount:0,transportationFees:0,transactions:[]}),s[y].totalAmount+=n.amount,s[y].transportationFees+=((P=n.operationalCosts)==null?void 0:P.transportationFees)||0,s[y].transactions.push(n),s},{}),k=Object.values(D);return v.length===0?e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsx(o,{children:"Financial Dashboard"}),e.jsx(j,{children:"No financial data available yet"})]}),e.jsxs(r,{className:"text-center py-10",children:[e.jsx(je,{className:"h-16 w-16 mx-auto text-muted-foreground opacity-50"}),e.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Start making transactions to see your financial dashboard"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),"Budget Overview"]}),e.jsx(j,{children:"Current budget status and allocation"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1 items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Budget Usage"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-sm font-bold ${f>80?"text-destructive":"text-muted-foreground"}`,children:[f,"%"]}),f>80&&e.jsx(T,{className:"h-4 w-4 text-destructive"})]})]}),e.jsx(S,{value:f,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-3",children:[e.jsx(t,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Income"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:[i," ",p.toLocaleString()]})]}),e.jsx(X,{className:"h-6 w-6 text-green-600"})]})})}),e.jsx(t,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Expenses"}),e.jsxs("p",{className:"text-xl font-bold text-red-600",children:[i," ",l.toLocaleString()]})]}),e.jsx(J,{className:"h-6 w-6 text-red-600"})]})})}),e.jsx(t,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transportation Fees"}),e.jsxs("p",{className:"text-xl font-bold text-amber-600",children:[i," ",h.toLocaleString()]})]}),e.jsx(z,{className:"h-6 w-6 text-amber-600"})]})})}),e.jsx(t,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Net Balance"}),e.jsxs("p",{className:`text-xl font-bold ${u>=0?"text-green-600":"text-red-600"}`,children:[i," ",u.toLocaleString()]})]}),e.jsx(B,{className:`h-6 w-6 ${u>=0?"text-green-600":"text-red-600"}`})]})})})]})]})]}),e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-primary"}),"Per-Site Financial Breakdown"]}),e.jsx(j,{children:"Financial allocation per site with transportation fees"})]}),e.jsx(r,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-4",children:"Site ID"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Total Budget"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Transportation Fee"}),e.jsx("th",{className:"text-left py-3 px-4",children:"% of Total"})]})}),e.jsx("tbody",{children:k.length>0?k.map((s,n)=>e.jsxs("tr",{className:n%2===0?"bg-muted/50":"",children:[e.jsx("td",{className:"py-2 px-4",children:s.id}),e.jsxs("td",{className:"py-2 px-4",children:[i," ",s.totalAmount.toLocaleString()]}),e.jsxs("td",{className:"py-2 px-4",children:[i," ",s.transportationFees.toLocaleString()]}),e.jsx("td",{className:"py-2 px-4",children:l>0?`${Math.round(s.totalAmount/l*100)}%`:"0%"})]},n)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-4 text-center text-muted-foreground",children:"No per-site financial data available"})})}),e.jsx("tfoot",{className:"border-t font-medium",children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4",children:"Total"}),e.jsxs("td",{className:"py-3 px-4",children:[i," ",l.toLocaleString()]}),e.jsxs("td",{className:"py-3 px-4",children:[i," ",h.toLocaleString()]}),e.jsx("td",{className:"py-3 px-4",children:"100%"})]})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5 text-primary"}),"Expense Distribution"]}),e.jsx(j,{children:"Breakdown of operational costs"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(Y,{width:"100%",height:"100%",children:e.jsxs($e,{children:[e.jsx(Ue,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:n})=>`${s}: ${(n*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:d.map((s,n)=>e.jsx(He,{fill:C[n%C.length]},`cell-${n}`))}),e.jsx(q,{}),e.jsx(Q,{formatter:s=>[`${i} ${s}`,"Amount"]})]})})})})]}),e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5 text-primary"}),"Monthly Financial Trends"]}),e.jsx(j,{children:"Income vs Expenses over time"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(Y,{width:"100%",height:"100%",children:e.jsxs(We,{data:x,children:[e.jsx(ge,{strokeDasharray:"3 3",opacity:.3}),e.jsx(Ne,{dataKey:"name"}),e.jsx(fe,{}),e.jsx(Q,{formatter:s=>[`${i} ${s}`,""]}),e.jsx(q,{}),e.jsx(me,{dataKey:"income",name:"Income",fill:"#10B981"}),e.jsx(me,{dataKey:"expenses",name:"Expenses",fill:"#EF4444"})]})})})})]})]}),f>80&&e.jsxs(t,{className:"border-destructive",children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(T,{className:"h-5 w-5"}),"Budget Alert"]})}),e.jsx(r,{children:e.jsxs("p",{children:["Your budget usage is at ",f,"%. Consider adjusting spending or requesting a budget increase."]})})]})]})},as=({transactions:v})=>{var _;const[p,l]=M.useState("all"),[u,g]=M.useState("summary"),f=v.filter(a=>a.siteVisitId&&a.taskDetails),i=f.filter(a=>{if(p==="all")return!0;const N=new Date(a.createdAt),b=new Date;switch(p){case"today":return N.toDateString()===b.toDateString();case"week":const ee=new Date;return ee.setDate(b.getDate()-7),N>=ee;case"month":const se=new Date;return se.setMonth(b.getMonth()-1),N>=se;default:return!0}}),d=i.reduce((a,N)=>a+(N.type==="credit"?N.amount:0),0),x=i.reduce((a,N)=>{var b;return a+(((b=N.operationalCosts)==null?void 0:b.totalCosts)||0)},0),C=i.reduce((a,N)=>{var b;return a+(((b=N.taskDetails)==null?void 0:b.baseAmount)||0)},0),h=i.reduce((a,N)=>{var b;return a+(((b=N.taskDetails)==null?void 0:b.distanceFee)||0)},0),D=i.reduce((a,N)=>{var b;return a+(((b=N.taskDetails)==null?void 0:b.complexityFee)||0)},0),k=i.reduce((a,N)=>{var b;return a+(((b=N.taskDetails)==null?void 0:b.urgencyFee)||0)},0),s=((_=i[0])==null?void 0:_.currency)||"SDG",n=d>0?C/d*100:0,y=d>0?h/d*100:0,P=d>0?D/d*100:0,L=d>0?k/d*100:0,Z=i.reduce((a,N)=>(a[N.status]=(a[N.status]||0)+1,a),{});return f.length===0?e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsx(o,{className:"text-lg",children:"Site Visit Financial Tracking"}),e.jsx(j,{children:"No site visit financial data available yet"})]}),e.jsxs(r,{className:"text-center py-6",children:[e.jsx(V,{className:"h-12 w-12 mx-auto text-muted-foreground opacity-50"}),e.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Site visit financial details will appear here as you complete tasks"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-4",children:[e.jsx(pe,{value:u,onValueChange:g,className:"w-full md:w-auto",children:e.jsxs(ue,{children:[e.jsx(R,{value:"summary",children:"Summary"}),e.jsx(R,{value:"details",children:"Details"})]})}),e.jsxs(Ke,{value:p,onValueChange:l,children:[e.jsx(Ye,{className:"w-full md:w-[180px]",children:e.jsx(qe,{placeholder:"Time Range"})}),e.jsxs(Qe,{children:[e.jsx(I,{value:"all",children:"All Time"}),e.jsx(I,{value:"today",children:"Today"}),e.jsx(I,{value:"week",children:"This Week"}),e.jsx(I,{value:"month",children:"This Month"})]})]})]}),u==="summary"?e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsx(o,{className:"text-lg",children:"Site Visit Financial Summary"}),e.jsx(j,{children:"Detailed financial breakdown for all site visits"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(t,{children:[e.jsx(m,{className:"py-3",children:e.jsxs(o,{className:"text-sm flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-green-600"}),"Task Fee Breakdown"]})}),e.jsxs(r,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Base Amount"}),e.jsxs("span",{className:"text-xs font-medium",children:[C," ",s]})]}),e.jsx(S,{value:n,className:"h-1.5"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Distance Fees"}),e.jsxs("span",{className:"text-xs font-medium",children:[h," ",s]})]}),e.jsx(S,{value:y,className:"h-1.5"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Complexity Fees"}),e.jsxs("span",{className:"text-xs font-medium",children:[D," ",s]})]}),e.jsx(S,{value:P,className:"h-1.5"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Urgency Fees"}),e.jsxs("span",{className:"text-xs font-medium",children:[k," ",s]})]}),e.jsx(S,{value:L,className:"h-1.5"})]})]})]}),e.jsxs(t,{children:[e.jsx(m,{className:"py-3",children:e.jsxs(o,{className:"text-sm flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4 text-blue-600"}),"Financial Summary"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Completed Site Visits"}),e.jsx("span",{className:"font-medium",children:i.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Earnings"}),e.jsxs("span",{className:"font-medium text-green-600",children:[d," ",s]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Task Payment"}),e.jsxs("span",{className:"font-medium",children:[i.length>0?(d/i.length).toFixed(2):0," ",s]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-1 border-t",children:[e.jsx("span",{className:"text-sm font-medium",children:"Operational Costs"}),e.jsxs("span",{className:"font-medium text-red-600",children:[x," ",s]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-1 border-t",children:[e.jsx("span",{className:"text-sm font-medium",children:"Net Total"}),e.jsxs("span",{className:"font-bold",children:[(d-x).toFixed(2)," ",s]})]})]})})]})]}),e.jsxs(t,{children:[e.jsx(m,{className:"py-3",children:e.jsxs(o,{className:"text-sm flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4 text-amber-600"}),"Payment Status Overview"]})}),e.jsx(r,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["pending","approved","paid","completed","failed","disputed"].map(a=>Z[a]?e.jsxs(t,{className:"text-center p-2",children:[e.jsx("p",{className:`text-xs uppercase font-semibold ${a==="completed"||a==="paid"||a==="approved"?"text-green-600":a==="pending"?"text-amber-600":"text-red-600"}`,children:a}),e.jsx("p",{className:"text-2xl font-bold",children:Z[a]||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"transactions"})]},a):null)})})]})]})]}):e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsx(o,{className:"text-lg",children:"Detailed Site Visit Finances"}),e.jsx(j,{children:"Individual transaction details for site visits"})]}),e.jsxs(r,{className:"space-y-4",children:[i.map(a=>e.jsxs(t,{className:"overflow-hidden",children:[e.jsx("div",{className:`h-1 w-full ${a.status==="completed"||a.status==="paid"||a.status==="approved"?"bg-green-500":a.status==="pending"?"bg-amber-500":"bg-red-500"}`}),e.jsxs(r,{className:"pt-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Site ID: ",a.siteVisitId]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),Xe(new Date(a.createdAt),"MMM d, yyyy")]})]})]})]}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center gap-2",children:[e.jsx("div",{className:`px-2 py-1 rounded-full text-xs ${a.status==="completed"||a.status==="paid"||a.status==="approved"?"bg-green-100 text-green-800":a.status==="pending"?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:a.status}),e.jsxs("span",{className:`font-bold ${a.type==="credit"?"text-green-600":"text-red-600"}`,children:[a.type==="credit"?"+":"-",a.amount," ",a.currency]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t pt-3 mt-2",children:[a.taskDetails&&e.jsxs("div",{children:[e.jsxs("h5",{className:"text-sm font-semibold mb-2 flex items-center gap-1",children:[e.jsx(ae,{className:"h-3.5 w-3.5"}),"Task Fee Breakdown"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Base Amount:"}),e.jsxs("span",{children:[a.taskDetails.baseAmount," ",a.currency]}),e.jsx("span",{className:"text-muted-foreground",children:"Distance Fee:"}),e.jsxs("span",{children:[a.taskDetails.distanceFee," ",a.currency]}),e.jsx("span",{className:"text-muted-foreground",children:"Complexity Fee:"}),e.jsxs("span",{children:[a.taskDetails.complexityFee," ",a.currency]}),e.jsx("span",{className:"text-muted-foreground",children:"Urgency Fee:"}),e.jsxs("span",{children:[a.taskDetails.urgencyFee," ",a.currency]}),e.jsx("span",{className:"font-medium",children:"Total Fee:"}),e.jsxs("span",{className:"font-medium",children:[a.taskDetails.totalFee," ",a.currency]})]})]}),a.operationalCosts&&e.jsxs("div",{children:[e.jsxs("h5",{className:"text-sm font-semibold mb-2 flex items-center gap-1",children:[e.jsx(Se,{className:"h-3.5 w-3.5"}),"Operational Costs"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Permit Fees:"}),e.jsxs("span",{children:[a.operationalCosts.permitFees," ",a.currency]}),e.jsx("span",{className:"text-muted-foreground",children:"Transportation:"}),e.jsxs("span",{children:[a.operationalCosts.transportationFees," ",a.currency]}),e.jsx("span",{className:"text-muted-foreground",children:"Logistics:"}),e.jsxs("span",{children:[a.operationalCosts.logisticsFees," ",a.currency]}),e.jsx("span",{className:"text-muted-foreground",children:"Other Fees:"}),e.jsxs("span",{children:[a.operationalCosts.otherFees," ",a.currency]}),e.jsx("span",{className:"font-medium",children:"Total Costs:"}),e.jsxs("span",{className:"font-medium",children:[a.operationalCosts.totalCosts," ",a.currency]})]})]})]})]})]},a.id)),i.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"h-12 w-12 mx-auto text-muted-foreground opacity-50"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"No transactions found for the selected time period"})]})]})]})]})},ts=({pendingCount:v,approvedCount:p,escalatedCount:l,rejectedCount:u,totalTransactions:g})=>{const f=Math.round(v/g*100)||0,i=Math.round(p/g*100)||0,d=Math.round(l/g*100)||0,x=Math.round(u/g*100)||0,C=[{id:"AP1",user:"Ahmed Ibrahim",timestamp:"2025-04-14T09:30:00",status:"approved",tier:"standard",amount:650},{id:"AP2",user:"Sara Mohammed",timestamp:"2025-04-14T10:15:00",status:"escalated",tier:"review",amount:1250},{id:"AP3",user:"Omar Hassan",timestamp:"2025-04-14T11:05:00",status:"rejected",tier:"high-risk",amount:3500},{id:"AP4",user:"Fatima Ali",timestamp:"2025-04-14T11:45:00",status:"pending",tier:"standard",amount:800}];return e.jsxs(t,{className:"border-t-4 border-t-blue-600 overflow-hidden transition-all hover:shadow-md",children:[e.jsxs(m,{className:"bg-slate-50 pb-2",children:[e.jsx(o,{className:"text-xl",children:"Real-Time Approval Tier Analytics"}),e.jsx(j,{children:"Live tracking of transaction approvals and risk assessment"})]}),e.jsxs(r,{className:"pt-4 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(t,{className:"p-3 border-l-4 border-l-amber-400",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"font-medium",children:"Pending"})]}),e.jsx(w,{variant:"outline",className:"bg-amber-50 text-amber-700",children:v})]})}),e.jsx(t,{className:"p-3 border-l-4 border-l-green-400",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Approved"})]}),e.jsx(w,{variant:"outline",className:"bg-green-50 text-green-700",children:p})]})}),e.jsx(t,{className:"p-3 border-l-4 border-l-yellow-400",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"font-medium",children:"Escalated"})]}),e.jsx(w,{variant:"outline",className:"bg-yellow-50 text-yellow-700",children:l})]})}),e.jsx(t,{className:"p-3 border-l-4 border-l-red-400",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"font-medium",children:"Rejected"})]}),e.jsx(w,{variant:"outline",className:"bg-red-50 text-red-700",children:u})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Approval Flow Distribution"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Pending"}),e.jsxs("span",{children:[f,"%"]})]}),e.jsx(S,{value:f,className:"h-1.5 bg-slate-100",indicatorClassName:"bg-amber-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Approved"}),e.jsxs("span",{children:[i,"%"]})]}),e.jsx(S,{value:i,className:"h-1.5 bg-slate-100",indicatorClassName:"bg-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Escalated for Review"}),e.jsxs("span",{children:[d,"%"]})]}),e.jsx(S,{value:d,className:"h-1.5 bg-slate-100",indicatorClassName:"bg-yellow-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Rejected"}),e.jsxs("span",{children:[x,"%"]})]}),e.jsx(S,{value:x,className:"h-1.5 bg-slate-100",indicatorClassName:"bg-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Recent Approval Activity"}),e.jsxs(be,{children:[e.jsx(ve,{children:e.jsxs(O,{children:[e.jsx(F,{children:"User"}),e.jsx(F,{children:"Amount"}),e.jsx(F,{children:"Status"}),e.jsx(F,{children:"Risk Tier"})]})}),e.jsx(ye,{children:C.map(h=>e.jsxs(O,{className:"hover:bg-slate-50",children:[e.jsx(A,{className:"font-medium",children:h.user}),e.jsxs(A,{children:["SDG ",h.amount]}),e.jsxs(A,{children:[h.status==="approved"&&e.jsxs(w,{variant:"outline",className:"bg-green-50 text-green-700 flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"})," Approved"]}),h.status==="escalated"&&e.jsxs(w,{variant:"outline",className:"bg-yellow-50 text-yellow-700 flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"})," Escalated"]}),h.status==="rejected"&&e.jsxs(w,{variant:"outline",className:"bg-red-50 text-red-700 flex items-center gap-1",children:[e.jsx(le,{className:"h-3 w-3"})," Rejected"]}),h.status==="pending"&&e.jsxs(w,{variant:"outline",className:"bg-amber-50 text-amber-700 flex items-center gap-1",children:[e.jsx(te,{className:"h-3 w-3"})," Pending"]})]}),e.jsxs(A,{children:[h.tier==="standard"&&e.jsx(w,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Standard"}),h.tier==="review"&&e.jsx(w,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:"Review"}),h.tier==="high-risk"&&e.jsx(w,{className:"bg-red-100 text-red-800 hover:bg-red-200",children:"High Risk"})]})]},h.id))})]})]})]})]})},ls=()=>{const v=[{name:"May",actual:8500,predicted:9e3},{name:"Jun",actual:9200,predicted:9500},{name:"Jul",actual:0,predicted:10200},{name:"Aug",actual:0,predicted:11e3},{name:"Sep",actual:0,predicted:10500},{name:"Oct",actual:0,predicted:11800}],p=[{id:"SV001",location:"North District",actual:1200,predicted:1350,variance:12.5},{id:"SV002",location:"Central Area",actual:1500,predicted:1450,variance:-3.3},{id:"SV003",location:"Eastern Region",actual:2200,predicted:1950,variance:-11.4},{id:"SV004",location:"Western Zone",actual:1800,predicted:2100,variance:16.7}];return e.jsxs(t,{className:"border-t-4 border-t-purple-600 overflow-hidden transition-all hover:shadow-md",children:[e.jsxs(m,{className:"bg-slate-50 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{className:"text-xl flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5 text-purple-600"}),"AI-Driven Budget Forecast"]}),e.jsxs(w,{variant:"outline",className:"bg-purple-50 text-purple-700 flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3"})," Predictive"]})]}),e.jsx(j,{children:"Smart budget allocation with predictive insights"})]}),e.jsxs(r,{className:"pt-4 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Budget Health Status"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Available Funds"}),e.jsx(X,{className:"h-4 w-4 text-green-500"})]}),e.jsx("p",{className:"text-lg font-bold",children:"SDG 42,500"}),e.jsx(S,{value:65,className:"h-1 bg-slate-100"})]})}),e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Projected Costs"}),e.jsx(J,{className:"h-4 w-4 text-amber-500"})]}),e.jsx("p",{className:"text-lg font-bold",children:"SDG 31,200"}),e.jsx(S,{value:48,className:"h-1 bg-slate-100",indicatorClassName:"bg-amber-500"})]})}),e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Budget Efficiency"}),e.jsx(De,{className:"h-4 w-4 text-blue-500"})]}),e.jsx("p",{className:"text-lg font-bold",children:"92.4%"}),e.jsx(S,{value:92.4,className:"h-1 bg-slate-100",indicatorClassName:"bg-blue-500"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"6-Month Budget Forecast"}),e.jsx("div",{className:"h-[220px]",children:e.jsx(Y,{width:"100%",height:"100%",children:e.jsxs(Je,{data:v,children:[e.jsx(ge,{strokeDasharray:"3 3",opacity:.3}),e.jsx(Ne,{dataKey:"name"}),e.jsx(fe,{}),e.jsx(Q,{formatter:l=>[`SDG ${l}`,""]}),e.jsx(q,{}),e.jsx(oe,{type:"monotone",dataKey:"actual",stroke:"#10B981",name:"Actual Spending",strokeWidth:2,dot:{r:4}}),e.jsx(oe,{type:"monotone",dataKey:"predicted",stroke:"#6366F1",name:"AI Predicted",strokeWidth:2,strokeDasharray:"5 5",dot:{r:4}})]})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Site Visit Cost Predictions"}),e.jsxs("div",{className:"rounded-md border",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-2 p-2 border-b bg-slate-50 text-xs font-medium",children:[e.jsx("div",{children:"Site ID"}),e.jsx("div",{children:"Location"}),e.jsx("div",{children:"Actual Cost"}),e.jsx("div",{children:"AI Predicted"}),e.jsx("div",{children:"Variance"})]}),e.jsx("div",{className:"divide-y",children:p.map(l=>e.jsxs("div",{className:"grid grid-cols-5 gap-2 p-2 text-sm hover:bg-slate-50 transition-colors",children:[e.jsx("div",{className:"font-medium",children:l.id}),e.jsx("div",{children:l.location}),e.jsxs("div",{children:["SDG ",l.actual]}),e.jsxs("div",{children:["SDG ",l.predicted]}),e.jsx("div",{children:e.jsxs("span",{className:l.variance>10?"text-red-600":l.variance<0?"text-green-600":"text-amber-600",children:[l.variance>0?"+":"",l.variance,"%"]})})]},l.id))})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 mb-2",children:[e.jsx(ie,{className:"h-4 w-4 text-purple-500"}),"Smart Budget Recommendations"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"p-3 bg-purple-50 border-purple-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(re,{className:"h-4 w-4 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Reallocate Transportation Budget"}),e.jsx("p",{className:"text-xs text-purple-700",children:"Increase Eastern Region budget by 15% to match actual spending patterns."})]})]})}),e.jsx(t,{className:"p-3 bg-purple-50 border-purple-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Logistics Cost Optimization"}),e.jsx("p",{className:"text-xs text-purple-700",children:"Consolidate Western Zone visits to reduce logistics costs by approximately 12%."})]})]})}),e.jsxs(c,{variant:"outline",className:"w-full mt-2 group",children:["View All AI Recommendations",e.jsx(Fe,{className:"h-4 w-4 ml-1 transition-transform group-hover:translate-x-1"})]})]})]})]})]})};function is(){const{processMonthlyRetainers:v}=Be(),{getCurrentUserClassifications:p}=Ee(),[l,u]=M.useState(!1),[g,f]=M.useState(null),[i,d]=M.useState(null),[x,C]=M.useState(!1),h=()=>{const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`},D=async()=>{C(!0);try{const n=(await p()).filter(y=>y.hasRetainer&&y.isActive);d(n.length)}catch{}finally{C(!1)}},k=async()=>{u(!0),f(null);try{const s=await v();f(s),await D()}catch{}finally{u(!1)}};return e.jsxs(t,{"data-testid":"card-retainer-processing",children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),"Monthly Retainer Processing"]}),e.jsx(j,{children:"Process monthly retainer payments for classified team members"})]}),e.jsx(w,{variant:"outline",children:h()})]})}),e.jsxs(r,{className:"space-y-4",children:[i!==null&&e.jsxs(xe,{children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsxs(he,{children:[i," team members are currently eligible for monthly retainers"]})]}),g&&e.jsxs(xe,{variant:g.failed>0?"destructive":"default",children:[g.failed>0?e.jsx(Ae,{className:"h-4 w-4"}):e.jsx(K,{className:"h-4 w-4"}),e.jsx(he,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Processing Complete"}),e.jsxs("div",{className:"text-sm",children:["Successfully processed: ",g.processed," / ",g.total]}),g.failed>0&&e.jsxs("div",{className:"text-sm text-destructive",children:["Failed: ",g.failed]})]})})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"How it works:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Fetches all team members with active retainer classifications"}),e.jsx("li",{children:"Checks if retainer was already paid for current month"}),e.jsx("li",{children:"Adds retainer amount to each eligible member's wallet"}),e.jsx("li",{children:"Creates transaction record for audit trail"})]})]})]}),e.jsxs(Ve,{className:"flex gap-2",children:[e.jsx(c,{onClick:D,variant:"outline",disabled:x||l,"data-testid":"button-refresh-eligible",children:x?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Check Eligible Users"]})}),e.jsx(c,{onClick:k,disabled:l,"data-testid":"button-process-retainers",children:l?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Process This Month's Retainers"]})})]})]})}const Fs=()=>{const v=Le(),[p,l]=M.useState("financial-tracking"),u=v.transactions??[],{toast:g}=Ie(),f=es(),i=u.filter(s=>s.siteVisitId),d=()=>{g({title:"Payment approved",description:"The selected payment has been approved and will be processed shortly."})},x=()=>{g({title:"Dispute resolved",description:"The payment dispute has been resolved and marked as completed."})},C=()=>{g({title:"Budget updated",description:"The monthly budget has been updated successfully."})},h=s=>{g({title:`Exporting as ${s.toUpperCase()}`,description:`Your financial report is being prepared for download in ${s.toUpperCase()} format.`})},D=[{id:"1",amount:450,timestamp:new Date().toISOString(),status:"normal"},{id:"2",amount:1200,timestamp:new Date().toISOString(),status:"suspicious"},{id:"3",amount:2500,timestamp:new Date().toISOString(),status:"blocked"}],k=[{id:"h1",name:"Q1 Financial Summary",date:"2025-03-31",type:"Quarterly",format:"PDF",user:"John Doe",size:"1.2MB"},{id:"h2",name:"February Budget Analysis",date:"2025-02-28",type:"Monthly",format:"Excel",user:"Sarah Williams",size:"3.5MB"},{id:"h3",name:"2024 Annual Financial Report",date:"2024-12-31",type:"Annual",format:"PDF",user:"Mike Johnson",size:"4.7MB"},{id:"h4",name:"January Payment Records",date:"2025-01-31",type:"Monthly",format:"CSV",user:"John Doe",size:"2.1MB"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>f("/dashboard"),"data-testid":"button-back-to-dashboard",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs(c,{onClick:()=>f("/financial-operations"),"data-testid":"button-financial-operations",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Financial Operations"]})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg shadow-sm border animate-fade-in",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-blue-700",children:"Financial Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Track site visit finances, manage budgets, and view financial reports"})]}),e.jsxs(pe,{value:p,onValueChange:l,className:"w-full",children:[e.jsxs(ue,{className:"grid w-full grid-cols-2 md:grid-cols-5 gap-2 p-1 h-auto",children:[e.jsx(R,{value:"financial-tracking",className:"py-2 data-[state=active]:bg-blue-50",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Site Visit Finances"}),e.jsx("span",{className:"sm:hidden",children:"Finances"})]})}),e.jsx(R,{value:"dashboard",className:"py-2 data-[state=active]:bg-blue-50",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Financial Dashboard"}),e.jsx("span",{className:"sm:hidden",children:"Dashboard"})]})}),e.jsx(R,{value:"budget",className:"py-2 data-[state=active]:bg-blue-50",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Budget Management"}),e.jsx("span",{className:"sm:hidden",children:"Budget"})]})}),e.jsx(R,{value:"payments",className:"py-2 data-[state=active]:bg-blue-50",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Payment Processing"}),e.jsx("span",{className:"sm:hidden",children:"Payments"})]})}),e.jsx(R,{value:"reports",className:"py-2 data-[state=active]:bg-blue-50",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Reports & Audit"}),e.jsx("span",{className:"sm:hidden",children:"Reports"})]})})]}),e.jsx(E,{value:"financial-tracking",className:"mt-4",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Site Visit Financial Tracking"}),e.jsx(as,{transactions:i})]})}),e.jsx(E,{value:"dashboard",className:"mt-4",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Financial Dashboard"}),e.jsx(ts,{pendingCount:7,approvedCount:24,escalatedCount:5,rejectedCount:2,totalTransactions:38}),e.jsx(ls,{}),e.jsx(ss,{transactions:u})]})}),e.jsx(E,{value:"budget",className:"mt-4",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Budget Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),"Monthly Budget Configuration"]}),e.jsx(j,{children:"Define and adjust monthly budgets for operations"})]}),e.jsx(r,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Current Monthly Budget"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Period: Apr 1 - Apr 30, 2025"})]}),e.jsx("p",{className:"text-xl font-bold",children:"SDG 10,000"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(c,{variant:"outline",onClick:C,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Adjust Budget"]}),e.jsxs(c,{variant:"outline",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"View Forecast"]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-amber-500"}),"Budget Alerts"]}),e.jsx(j,{children:"Get notified about budget constraints"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-500",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Transportation budget at 75% usage"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Permit fees budget healthy (30% used)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Logistics budget critical (85% used)"})]})]}),e.jsx(c,{variant:"secondary",className:"w-full",children:"Configure Alert Thresholds"})]})]})]}),e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-primary"}),"Expense Allocation"]}),e.jsx(j,{children:"Track and manage expenses across categories"})]}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Permit Fees"}),e.jsx("p",{className:"text-lg font-bold",children:"SDG 2,500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"25% of total budget"})]})}),e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Transportation"}),e.jsx("p",{className:"text-lg font-bold",children:"SDG 3,000"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"30% of total budget"})]})}),e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Logistics"}),e.jsx("p",{className:"text-lg font-bold",children:"SDG 3,500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"35% of total budget"})]})}),e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Other Expenses"}),e.jsx("p",{className:"text-lg font-bold",children:"SDG 1,000"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"10% of total budget"})]})})]})})]})]})}),e.jsx(E,{value:"payments",className:"mt-4",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("h2",{className:"text-xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-blue-600"}),"Payment Processing"]}),e.jsx(is,{}),e.jsx(_e,{suspiciousTransactionsCount:u.length>0?u.filter(s=>s.status==="suspicious").length:D.filter(s=>s.status==="suspicious").length,blockedTransactionsCount:u.length>0?u.filter(s=>s.status==="blocked").length:D.filter(s=>s.status==="blocked").length,highRiskAccountsCount:u.length>0?u.filter(s=>(s.amount||0)>2e3).length:D.filter(s=>(s.amount||0)>2e3).length}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(t,{className:"border-t-4 border-t-green-500 overflow-hidden transition-all hover:shadow-md",children:[e.jsxs(m,{className:"bg-slate-50 pb-2",children:[e.jsxs(o,{className:"flex items-center gap-2 text-xl",children:[e.jsx(U,{className:"h-5 w-5 text-primary"}),"Payment Approvals"]}),e.jsx(j,{children:"Manage pending payment requests"})]}),e.jsx(r,{className:"pt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border rounded hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Ahmed Mohamed"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Site ID: SV-23908"})]}),e.jsx("span",{className:"text-sm font-bold",children:"SDG 450"})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(c,{size:"sm",className:"hover:scale-105 transition-transform",onClick:d,children:"Approve"}),e.jsx(c,{size:"sm",variant:"outline",children:"Reject"})]})]}),e.jsxs("div",{className:"p-3 border rounded hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Sarah Abdalla"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Site ID: SV-23915"})]}),e.jsx("span",{className:"text-sm font-bold",children:"SDG 650"})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(c,{size:"sm",className:"hover:scale-105 transition-transform",onClick:d,children:"Approve"}),e.jsx(c,{size:"sm",variant:"outline",children:"Reject"})]})]}),e.jsxs("div",{className:"p-3 border rounded hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Ibrahim Ali"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Site ID: SV-23920"})]}),e.jsx("span",{className:"text-sm font-bold",children:"SDG 350"})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(c,{size:"sm",className:"hover:scale-105 transition-transform",onClick:d,children:"Approve"}),e.jsx(c,{size:"sm",variant:"outline",children:"Reject"})]})]})]})})]}),e.jsxs(t,{className:"border-t-4 border-t-amber-500 overflow-hidden transition-all hover:shadow-md",children:[e.jsxs(m,{className:"bg-slate-50 pb-2",children:[e.jsxs(o,{className:"flex items-center gap-2 text-xl",children:[e.jsx(T,{className:"h-5 w-5 text-amber-500"}),"Disputed Payments"]}),e.jsx(j,{children:"Resolve disputed transaction issues"})]}),e.jsx(r,{className:"pt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border-2 border-amber-200 rounded bg-amber-50 hover:bg-amber-100 transition-colors",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Omar Hassan"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dispute: Payment amount incorrect"})]}),e.jsx("span",{className:"text-sm font-bold",children:"SDG 550"})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(c,{size:"sm",variant:"secondary",className:"hover:scale-105 transition-transform",onClick:x,children:"Resolve"}),e.jsx(c,{size:"sm",variant:"outline",children:"Details"})]})]}),e.jsxs("div",{className:"p-3 border-2 border-amber-200 rounded bg-amber-50 hover:bg-amber-100 transition-colors",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Fatima Osman"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dispute: Payment not received"})]}),e.jsx("span",{className:"text-sm font-bold",children:"SDG 400"})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(c,{size:"sm",variant:"secondary",className:"hover:scale-105 transition-transform",onClick:x,children:"Resolve"}),e.jsx(c,{size:"sm",variant:"outline",children:"Details"})]})]})]})})]})]}),e.jsxs(t,{className:"border-t-4 border-t-indigo-500 overflow-hidden transition-all hover:shadow-md",children:[e.jsxs(m,{className:"bg-slate-50 pb-2",children:[e.jsxs(o,{className:"flex items-center gap-2 text-xl",children:[e.jsx($,{className:"h-5 w-5 text-primary"}),"Withdrawal Security Settings"]}),e.jsx(j,{children:"Configure security rules and withdrawal limits"})]}),e.jsx(r,{className:"pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"p-4 border rounded-lg hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-blue-100",children:e.jsx(Te,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Tiered Limits"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Data Collectors: SDG 500"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supervisors: SDG 1,500"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Admins: Unlimited with MFA"})]})]})}),e.jsx("div",{className:"p-4 border rounded-lg hover:bg-amber-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-amber-100",children:e.jsx(H,{className:"h-4 w-4 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Cooldown Periods"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Standard: 24 hours"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Large withdrawals: 48 hours"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Multiple withdrawals: 72 hours"})]})]})}),e.jsx("div",{className:"p-4 border rounded-lg hover:bg-green-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-green-100",children:e.jsx(U,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Security Features"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Multi-factor authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Approval workflows"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time fraud detection"})]})]})})]})})]})]})}),e.jsx(E,{value:"reports",className:"mt-4",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("h2",{className:"text-xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),"Financial Reports & Audits"]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(Ge,{children:[e.jsx(ze,{asChild:!0,children:e.jsxs(c,{className:"flex items-center gap-1",children:["Generate Report",e.jsx(Pe,{className:"h-4 w-4 ml-1"})]})}),e.jsxs(Oe,{align:"end",children:[e.jsx(W,{onClick:()=>h("pdf"),children:"PDF Report"}),e.jsx(W,{onClick:()=>h("excel"),children:"Excel Spreadsheet"}),e.jsx(W,{onClick:()=>h("csv"),children:"CSV Export"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(t,{className:"flex flex-col",children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),"Task Payments Report"]}),e.jsx(j,{children:"Earnings per Site Visit and user"})]}),e.jsx(r,{className:"flex-grow",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track all earnings organized by site visits and assigned personnel."})}),e.jsx("div",{className:"p-4 pt-0 mt-auto",children:e.jsx(c,{className:"w-full",children:"Generate Report"})})]}),e.jsxs(t,{className:"flex flex-col",children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),"Budget Summary"]}),e.jsx(j,{children:"Monitors fund usage and allocations"})]}),e.jsx(r,{className:"flex-grow",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comprehensive overview of budget allocations, spending, and remaining balances."})}),e.jsx("div",{className:"p-4 pt-0 mt-auto",children:e.jsx(c,{className:"w-full",children:"Generate Report"})})]}),e.jsxs(t,{className:"flex flex-col",children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-primary"}),"Audit Logs"]}),e.jsx(j,{children:"Details all financial transactions"})]}),e.jsx(r,{className:"flex-grow",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete audit trail of all financial activities for compliance and verification."})}),e.jsx("div",{className:"p-4 pt-0 mt-auto",children:e.jsx(c,{className:"w-full",children:"View Audit Logs"})})]})]}),e.jsxs(t,{children:[e.jsx(m,{children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:e.jsxs("div",{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5 text-primary"}),"Historical Reports"]}),e.jsx(j,{children:"Access and download previously generated reports"})]})})}),e.jsx(r,{children:e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs(be,{children:[e.jsx(ve,{children:e.jsxs(O,{children:[e.jsx(F,{children:"Report Name"}),e.jsx(F,{children:"Type"}),e.jsx(F,{children:"Date"}),e.jsx(F,{children:"Format"}),e.jsx(F,{children:"Generated By"}),e.jsx(F,{className:"text-right",children:"Action"})]})}),e.jsx(ye,{children:k.map(s=>e.jsxs(O,{children:[e.jsx(A,{className:"font-medium",children:s.name}),e.jsx(A,{children:s.type}),e.jsx(A,{children:new Date(s.date).toLocaleDateString()}),e.jsx(A,{children:s.format}),e.jsx(A,{children:s.user}),e.jsx(A,{className:"text-right",children:e.jsx(c,{variant:"ghost",size:"sm",children:"Download"})})]},s.id))}),e.jsx(Ze,{children:"A list of your recent generated reports."})]})})})]}),e.jsx("h3",{className:"text-lg font-semibold mt-2",children:"Historical Data Trends"}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-blue-700",children:"Historical trends chart will be displayed here"}),e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"This placeholder represents where the MMPHistoricalTrends component will be integrated."})]})}),e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5 text-primary"}),"Schedule Reports"]}),e.jsx(j,{children:"Set up automated report generation and delivery"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Weekly Summary"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Every Monday"})]}),e.jsx(c,{variant:"outline",size:"sm",children:"Edit"})]})}),e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Monthly Report"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"1st of month"})]}),e.jsx(c,{variant:"outline",size:"sm",children:"Edit"})]})}),e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Quarterly Review"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"End of quarter"})]}),e.jsx(c,{variant:"outline",size:"sm",children:"Edit"})]})}),e.jsx(t,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Annual Report"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"December 31"})]}),e.jsx(c,{variant:"outline",size:"sm",children:"Edit"})]})})]}),e.jsxs(c,{variant:"outline",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Create New Report Schedule"]})]})})]})]})]})})]})]})};export{Fs as default};
