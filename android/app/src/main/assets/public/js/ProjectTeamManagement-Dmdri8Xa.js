import{r as a,j as e,N as v}from"./react-core-B8kFjp2k.js";import{F as g,u as b,a as d}from"./index-PwDgWEVM.js";import{A as N,a as P,b as T}from"./alert-BXWNuJnD.js";import{T as y}from"./TeamCompositionManager-DL5fiHxh.js";import{bI as C,bo as _}from"./vendor-VlxgVHMv.js";import"./docs-D2Yi4cpO.js";import"./react-dom-BLwj5vIO.js";import"./jspdf-rld7HkB6.js";import"./router-CKy9yO3R.js";import"./query-CJ0Bt4ph.js";import"./supabase-CwPDIVMD.js";import"./xlsx-CBxwqXDA.js";import"./date-utils-YarVESQS.js";import"./forms-CESK2FDA.js";import"./radix-ui-C2DV4xtt.js";import"./radix-dialogs-CnlmQBMC.js";import"./radix-menus-CPezQVZk.js";import"./select-CXX5Q_V1.js";import"./table-CZ8ZB6wW.js";const K=()=>{const{id:r}=C(),n=_(),{getProjectById:l,updateProject:p,fetchProjects:u,loading:s,projects:o}=g(),{toast:j}=b(),[t,c]=a.useState(void 0),[f,m]=a.useState(!0);if(a.useEffect(()=>{o.length===0&&!s&&u()},[]),a.useEffect(()=>{if(!r){c(void 0),m(!1);return}const i=l(r);c(i),(o.length>0||!s)&&m(!1)},[r,o,s]),f||s&&!t)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20 animate-[spin_3s_linear_infinite]"}),e.jsx("div",{className:"absolute inset-[6px] rounded-full border-4 border-t-primary animate-[spin_2s_linear_infinite]"})]}),e.jsx("p",{className:"text-muted-foreground animate-pulse",children:"Loading project..."})]})});if(!t&&!s)return e.jsxs(N,{children:[e.jsx(P,{children:"Project Not Found"}),e.jsxs(T,{children:["The project you are trying to manage team members for does not exist or has been removed.",e.jsx("div",{className:"mt-4",children:e.jsx(d,{variant:"outline",onClick:()=>n("/projects"),children:"Back to Projects"})})]})]});const x=async i=>{if(!t)return;const h={...t,team:{...t.team,teamComposition:i}};await p(h),j({title:"Team Updated",description:"The project team has been updated successfully.",variant:"success"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>n(`/projects/${r}`),className:"hover:bg-muted",children:e.jsx(v,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Team"}),e.jsxs("p",{className:"text-muted-foreground",children:["Add or remove team members for project: ",t==null?void 0:t.name]})]})]}),t&&e.jsx(y,{project:t,onTeamChange:x})]})};export{K as default};
