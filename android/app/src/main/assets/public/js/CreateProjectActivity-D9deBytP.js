import{r,j as t,N as v}from"./react-core-B8kFjp2k.js";import{F as y,u as N,a as l}from"./index-PwDgWEVM.js";import{A as b}from"./ActivityForm-DxwKkf_I.js";import{A as g,a as P,b as A}from"./alert-BXWNuJnD.js";import{bI as C,bo as _}from"./vendor-VlxgVHMv.js";import"./docs-D2Yi4cpO.js";import"./react-dom-BLwj5vIO.js";import"./jspdf-rld7HkB6.js";import"./router-CKy9yO3R.js";import"./query-CJ0Bt4ph.js";import"./supabase-CwPDIVMD.js";import"./xlsx-CBxwqXDA.js";import"./date-utils-YarVESQS.js";import"./forms-CESK2FDA.js";import"./radix-ui-C2DV4xtt.js";import"./radix-dialogs-CnlmQBMC.js";import"./radix-menus-CPezQVZk.js";import"./textarea-BpQMf5eL.js";import"./toggle-DVFO8bcr.js";import"./form-BT_tmI7p.js";import"./label-C4lDws8j.js";import"./select-CXX5Q_V1.js";import"./calendar-DEyRSxJX.js";import"./popover-BSK_FA51.js";const X=()=>{const{id:s}=C(),o=_(),{getProjectById:p,updateProject:u,fetchProjects:j,projects:a,loading:i}=y(),{toast:x}=N(),[e,n]=r.useState(void 0),[d,m]=r.useState(!0);if(r.useEffect(()=>{a.length===0&&!i&&j()},[]),r.useEffect(()=>{if(!s){n(void 0),m(!1);return}const c=p(s);n(c),(a.length>0||!i)&&m(!1)},[s,a,i]),d||i&&!e)return t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[t.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20 animate-[spin_3s_linear_infinite]"}),t.jsx("div",{className:"absolute inset-[6px] rounded-full border-4 border-t-primary animate-[spin_2s_linear_infinite]"})]}),t.jsx("p",{className:"text-muted-foreground animate-pulse",children:"Loading project..."})]})});if(!e&&!d)return t.jsxs(g,{children:[t.jsx(P,{children:"Project Not Found"}),t.jsxs(A,{children:["The project you are trying to add an activity to does not exist or has been removed.",t.jsx("div",{className:"mt-4",children:t.jsx(l,{variant:"outline",onClick:()=>o("/projects"),children:"Back to Projects"})})]})]});const h=async c=>{if(!e)return;const f={...e,activities:[...e.activities,c]};await u(f),x({title:"Activity Created",description:"The activity has been added to the project successfully.",variant:"success"}),o(`/projects/${s}`)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx(l,{variant:"ghost",size:"icon",onClick:()=>o(`/projects/${s}`),className:"hover:bg-muted",children:t.jsx(v,{className:"h-4 w-4"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Create New Activity"}),t.jsxs("p",{className:"text-muted-foreground",children:["Add a new activity to the project: ",e==null?void 0:e.name]})]})]}),t.jsx(b,{projectId:s,onSubmit:h})]})};export{X as default};
