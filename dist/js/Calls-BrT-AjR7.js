import{r as b,R as S,j as e,v as I,u as D,a$ as A,q as k}from"./react-core-B8kFjp2k.js";import{e as L,E as T,x as E,a as x,T as O,i as $,j as h,I as R,k as p,S as f,C as j,A as g}from"./index-PwDgWEVM.js";import{C as H}from"./CallInterface-CeQ4eL66.js";import{bo as U}from"./vendor-VlxgVHMv.js";import"./docs-D2Yi4cpO.js";import"./react-dom-BLwj5vIO.js";import"./jspdf-rld7HkB6.js";import"./router-CKy9yO3R.js";import"./query-CJ0Bt4ph.js";import"./supabase-CwPDIVMD.js";import"./xlsx-CBxwqXDA.js";import"./date-utils-YarVESQS.js";import"./forms-CESK2FDA.js";import"./radix-ui-C2DV4xtt.js";import"./radix-dialogs-CnlmQBMC.js";import"./radix-menus-CPezQVZk.js";const ee=()=>{const{currentUser:r}=L(),c=U(),{users:n}=T(),{callState:i,initiateCall:o,endCall:v}=E(),[l,N]=b.useState(""),d=[{id:"c1",recipientId:"usr2",direction:"outgoing",duration:124,timestamp:new Date(Date.now()-36e5*2).toISOString(),status:"completed"},{id:"c2",recipientId:"usr3",direction:"incoming",duration:67,timestamp:new Date(Date.now()-36e5*5).toISOString(),status:"missed"},{id:"c3",recipientId:"usr4",direction:"outgoing",duration:245,timestamp:new Date(Date.now()-864e5).toISOString(),status:"completed"},{id:"c4",recipientId:"usr5",direction:"incoming",duration:31,timestamp:new Date(Date.now()-864e5*2).toISOString(),status:"completed"}],C=s=>{const t=Math.floor(s/60),a=s%60;return`${t}:${a<10?"0":""}${a}`},m=n.filter(s=>s.id!==(r==null?void 0:r.id)&&(s.name.toLowerCase().includes(l.toLowerCase())||s.role.toLowerCase().includes(l.toLowerCase()))),u=i.status!=="idle",w=s=>{const t=n.find(a=>a.id===s);t&&o(t)},y=s=>{const t=n.find(a=>a.id===s);t&&o(t)};return S.useEffect(()=>{r||c("/login")},[r,c]),e.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Call Center"}),e.jsx(x,{variant:"outline",onClick:()=>c(-1),children:"Go Back"})]}),u&&i.recipient&&e.jsx("div",{className:"py-8",children:e.jsx(H,{recipient:i.recipient||i.caller,callType:i.status,duration:i.duration,onEnd:v})}),!u&&e.jsxs(O,{defaultValue:"contacts",className:"w-full",children:[e.jsxs($,{className:"grid w-full grid-cols-2",children:[e.jsx(h,{value:"contacts",children:"Contacts"}),e.jsx(h,{value:"history",children:"Call History"})]}),e.jsxs("div",{className:"my-4 relative",children:[e.jsx(I,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(R,{placeholder:"Search users...",className:"pl-9",value:l,onChange:s=>N(s.target.value)})]}),e.jsx(p,{value:"contacts",children:e.jsx(f,{className:"h-[60vh]",children:e.jsxs("div",{className:"space-y-2 p-1",children:[m.map(s=>e.jsxs(j,{className:"p-3 hover:bg-accent cursor-pointer transition-colors flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"h-10 w-10",children:s.avatar?e.jsx("img",{src:s.avatar,alt:s.name,className:"rounded-full"}):e.jsx("div",{className:"bg-primary/10 w-full h-full rounded-full flex items-center justify-center",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.role})]})]}),e.jsx(x,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 rounded-full bg-green-100 hover:bg-green-200 text-green-600",onClick:()=>w(s.id),children:e.jsx(D,{className:"h-4 w-4"})})]},s.id)),m.length===0&&e.jsx("div",{className:"py-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No users found"})})]})})}),e.jsx(p,{value:"history",children:e.jsx(f,{className:"h-[60vh]",children:e.jsxs("div",{className:"space-y-2 p-1",children:[d.map(s=>{const t=n.find(a=>a.id===s.recipientId);return t?e.jsx(j,{className:"p-3 hover:bg-accent cursor-pointer transition-colors",onClick:()=>y(s.recipientId),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"h-10 w-10",children:t.avatar?e.jsx("img",{src:t.avatar,alt:t.name,className:"rounded-full"}):e.jsx("div",{className:"bg-primary/10 w-full h-full rounded-full flex items-center justify-center",children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"flex items-center text-xs gap-1 mt-0.5",children:[e.jsx(A,{className:`h-3 w-3 ${s.direction==="incoming"?"text-blue-500 rotate-180":"text-green-500"}`}),e.jsxs("span",{className:s.status==="missed"?"text-red-500":"text-muted-foreground",children:[s.direction==="incoming"?"Incoming":"Outgoing",s.status==="missed"?" (Missed)":""]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(s.timestamp).toLocaleDateString()}),e.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1 text-muted-foreground",children:[e.jsx(k,{className:"h-3 w-3"}),C(s.duration)]})]})]})},s.id):null}),d.length===0&&e.jsx("div",{className:"py-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No call history"})})]})})})]})]})};export{ee as default};
