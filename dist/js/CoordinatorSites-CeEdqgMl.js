import{r as m,j as e,ah as Me,v as T,q as Pe,N as A,C as E,ag as W,a2 as Ve,aV as U,$ as Le,aO as Te}from"./react-core-B8kFjp2k.js";import{u as Ae,e as Ee,U as Fe,s as _,a as h,T as Oe,i as Re,j as F,B as S,k as O,C as k,f as R,g as z,I,b as D,D as ne,l as re,m as le,n as de,p as ce}from"./index-PwDgWEVM.js";import{T as oe}from"./textarea-BpQMf5eL.js";import{bo as ze}from"./vendor-VlxgVHMv.js";import{o as me}from"./date-utils-YarVESQS.js";import"./docs-D2Yi4cpO.js";import"./react-dom-BLwj5vIO.js";import"./jspdf-rld7HkB6.js";import"./router-CKy9yO3R.js";import"./query-CJ0Bt4ph.js";import"./supabase-CwPDIVMD.js";import"./xlsx-CBxwqXDA.js";import"./forms-CESK2FDA.js";import"./radix-ui-C2DV4xtt.js";import"./radix-dialogs-CnlmQBMC.js";import"./radix-menus-CPezQVZk.js";const as=()=>{const X=ze(),{toast:M}=Ae(),{currentUser:t}=Ee(),{updateMMP:ue}=Fe(),[he,ee]=m.useState(!0),[P,xe]=m.useState([]),[G,se]=m.useState("new"),[fe,q]=m.useState(!1),[pe,B]=m.useState(!1),[Q,y]=m.useState(null),[H,b]=m.useState(""),[v,C]=m.useState(""),[J,je]=m.useState(""),[r,N]=m.useState(1),[g]=m.useState(20),[ve,K]=m.useState(0),[ge,te]=m.useState(0),[Ne,we]=m.useState(0),[_e,be]=m.useState(0),[ye,ae]=m.useState(0);m.useEffect(()=>{const s=setTimeout(()=>{je(v),N(1)},300);return()=>clearTimeout(s)},[v]),m.useEffect(()=>{if(!(t!=null&&t.id))return;(async()=>{try{const l=t.id,{data:d,error:i}=await _.from("mmp_site_entries").select("id, status, additional_data");if(i)throw i;const a=(d||[]).filter(n=>(n.additional_data||{}).assigned_to===l),o={count:a.filter(n=>n.status==="Dispatched"||n.status==="assigned"||n.status==="inProgress"||n.status==="in_progress").length},f={count:a.filter(n=>{var j;return((j=n.status)==null?void 0:j.toLowerCase())==="verified"}).length},w={count:a.filter(n=>{var j;return((j=n.status)==null?void 0:j.toLowerCase())==="approved"}).length},p={count:a.filter(n=>{var j;return((j=n.status)==null?void 0:j.toLowerCase())==="completed"}).length},c={count:a.filter(n=>{var j;return((j=n.status)==null?void 0:j.toLowerCase())==="rejected"}).length};K(o.count||0),te(f.count||0),we(w.count||0),be(p.count||0),ae(c.count||0)}catch{}})()},[t==null?void 0:t.id]),m.useEffect(()=>{Y(),C(""),N(1)},[t,G]);const Y=async()=>{if(t!=null&&t.id){ee(!0);try{const{data:s,error:l}=await _.from("mmp_site_entries").select("*").limit(1e3);if(l)throw l;let d=(s||[]).filter(i=>(i.additional_data||{}).assigned_to===t.id).map(i=>{var a;return{id:i.id,site_name:i.site_name,site_code:i.site_code,status:i.status,state:i.state,locality:i.locality,activity:i.activity_at_site||i.main_activity,main_activity:i.main_activity,visit_date:i.visit_date,assigned_at:((a=i.additional_data)==null?void 0:a.assigned_at)||i.created_at,comments:i.comments,mmp_file_id:i.mmp_file_id,hub_office:i.hub_office,verified_at:i.verified_at,verified_by:i.verified_by,verification_notes:i.verification_notes,additional_data:i.additional_data}});switch(G){case"new":d=d.filter(i=>i.status==="Dispatched"||i.status==="assigned"||i.status==="inProgress"||i.status==="in_progress");break;case"verified":d=d.filter(i=>{var a;return((a=i.status)==null?void 0:a.toLowerCase())==="verified"});break;case"approved":d=d.filter(i=>{var a;return((a=i.status)==null?void 0:a.toLowerCase())==="approved"});break;case"completed":d=d.filter(i=>{var a;return((a=i.status)==null?void 0:a.toLowerCase())==="completed"});break;case"rejected":d=d.filter(i=>{var a;return((a=i.status)==null?void 0:a.toLowerCase())==="rejected"});break}d.sort((i,a)=>{const o=i.assigned_at||i.created_at,f=a.assigned_at||a.created_at;return new Date(f).getTime()-new Date(o).getTime()}),xe(d),N(1)}catch{M({title:"Error",description:"Failed to load sites. Please try again.",variant:"destructive"})}finally{ee(!1)}}},Ce=async(s,l)=>{try{const d={status:"verified",verified_at:new Date().toISOString(),verified_by:(t==null?void 0:t.username)||(t==null?void 0:t.fullName)||(t==null?void 0:t.email)||"System"};l&&(d.verification_notes=l);const{error:i}=await _.from("mmp_site_entries").update(d).eq("id",s);if(i)throw i;try{const a=P.find(o=>o.id===s);if(a!=null&&a.mmp_file_id&&(a!=null&&a.site_code)){const{data:o}=await _.from("mmp_site_entries").select("cost, additional_data").eq("mmp_file_id",a.mmp_file_id).eq("site_code",a.site_code).single(),f=new Date().toISOString(),w=(t==null?void 0:t.username)||(t==null?void 0:t.fullName)||(t==null?void 0:t.email)||"System",p={status:"Verified",verified_at:f,verified_by:w};l&&(p.verification_notes=l);const c=o==null?void 0:o.cost,n=(o==null?void 0:o.additional_data)||{},j=n==null?void 0:n.enumerator_fee,ie=n==null?void 0:n.transport_fee;!c||c===0||c===null?(n.enumerator_fee=20,n.transport_fee=10,p.cost=30,p.additional_data=n):(!j||j===0)&&(!ie||ie===0)&&(c===30?(n.enumerator_fee=20,n.transport_fee=10):(n.enumerator_fee=c-10,n.transport_fee=10),p.additional_data=n),n.verified_at=f,n.verified_by=w,p.additional_data=n,await _.from("mmp_site_entries").update(p).eq("mmp_file_id",a.mmp_file_id).eq("site_code",a.site_code);const{data:Z,error:ke}=await _.from("mmp_files").select("workflow, status").eq("id",a.mmp_file_id).single();if(!ke&&Z){const $=Z.workflow||{};if(!($.coordinatorVerified===!0)){const De={...$,coordinatorVerified:!0,coordinatorVerifiedAt:new Date().toISOString(),coordinatorVerifiedBy:(t==null?void 0:t.username)||(t==null?void 0:t.fullName)||(t==null?void 0:t.email)||"System",currentStage:$.currentStage==="awaitingCoordinatorVerification"?"verified":$.currentStage||"verified",lastUpdated:new Date().toISOString()};await ue(a.mmp_file_id,{workflow:De,status:(Z.status==="pending","pending")})}}}}catch{}if(M({title:"Site Verified",description:"The site has been marked as verified."}),Y(),t!=null&&t.id){const a=t.id,{data:o}=await _.from("mmp_site_entries").select("id, status, additional_data"),f=(o||[]).filter(c=>(c.additional_data||{}).assigned_to===a),w={count:f.filter(c=>c.status==="Dispatched"||c.status==="assigned"||c.status==="inProgress"||c.status==="in_progress").length},p={count:f.filter(c=>{var n;return((n=c.status)==null?void 0:n.toLowerCase())==="verified"}).length};K(w.count||0),te(p.count||0)}se("verified"),q(!1),b(""),y(null)}catch{M({title:"Error",description:"Failed to verify site. Please try again.",variant:"destructive"})}},Se=async(s,l)=>{try{const d={status:"rejected",verified_at:new Date().toISOString(),verified_by:(t==null?void 0:t.username)||(t==null?void 0:t.fullName)||(t==null?void 0:t.email)||"System"};l&&(d.verification_notes=l);const{error:i}=await _.from("mmp_site_entries").update(d).eq("id",s);if(i)throw i;try{const a=P.find(o=>o.id===s);if(a!=null&&a.mmp_file_id&&(a!=null&&a.site_code)){const o={status:"Rejected"};l&&(o.verification_notes=l),await _.from("mmp_site_entries").update(o).eq("mmp_file_id",a.mmp_file_id).eq("site_code",a.site_code)}}catch{}if(M({title:"Site Rejected",description:"The site has been marked as rejected."}),Y(),t!=null&&t.id){const a=t.id,{data:o}=await _.from("mmp_site_entries").select("id, status, additional_data"),f=(o||[]).filter(c=>(c.additional_data||{}).assigned_to===a),w={count:f.filter(c=>c.status==="Dispatched"||c.status==="assigned"||c.status==="inProgress"||c.status==="in_progress").length},p={count:f.filter(c=>{var n;return((n=c.status)==null?void 0:n.toLowerCase())==="rejected"}).length};K(w.count||0),ae(p.count||0)}B(!1),b(""),y(null)}catch{M({title:"Error",description:"Failed to reject site. Please try again.",variant:"destructive"})}},x=m.useMemo(()=>{if(!J.trim())return P;const s=J.toLowerCase();return P.filter(l=>{var d,i,a,o,f,w,p;return((d=l.site_name)==null?void 0:d.toLowerCase().includes(s))||((i=l.site_code)==null?void 0:i.toLowerCase().includes(s))||((a=l.state)==null?void 0:a.toLowerCase().includes(s))||((o=l.locality)==null?void 0:o.toLowerCase().includes(s))||((f=l.activity)==null?void 0:f.toLowerCase().includes(s))||((w=l.main_activity)==null?void 0:w.toLowerCase().includes(s))||((p=l.hub_office)==null?void 0:p.toLowerCase().includes(s))})},[P,J]),V=m.useMemo(()=>{const s=(r-1)*g,l=s+g;return x.slice(s,l)},[x,r,g]),u=Math.ceil(x.length/g),L=(s,l=!0)=>e.jsx(k,{className:"overflow-hidden hover:shadow-md transition-shadow",children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.site_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Code: ",s.site_code]})]}),e.jsx(S,{variant:s.status==="verified"?"default":s.status==="approved"||s.status==="completed"?"success":s.status==="rejected"?"destructive":"secondary",children:s.status==="assigned"?"New":s.status==="inProgress"?"In Progress":s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"State:"}),e.jsx("p",{className:"font-medium",children:s.state})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Locality:"}),e.jsx("p",{className:"font-medium",children:s.locality})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Activity:"}),e.jsx("p",{className:"font-medium",children:s.main_activity||s.activity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Visit Date:"}),e.jsx("p",{className:"font-medium",children:s.visit_date?me(new Date(s.visit_date),"MMM d, yyyy"):"N/A"})]})]}),s.hub_office&&e.jsxs("div",{className:"mb-3 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Hub Office:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.hub_office})]}),s.comments&&e.jsx("div",{className:"mb-3 p-2 bg-muted rounded text-sm",children:e.jsx("p",{className:"text-muted-foreground",children:s.comments})}),s.verified_at&&e.jsxs("div",{className:"mb-3 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Verified:"}),e.jsx("span",{className:"ml-2",children:me(new Date(s.verified_at),"MMM d, yyyy h:mm a")})]}),s.verification_notes&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-50 rounded text-sm border border-blue-200",children:[e.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Verification Notes:"}),e.jsx("p",{className:"text-blue-800",children:s.verification_notes})]}),l&&e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>X(`/site-visits/${s.id}`),className:"flex items-center gap-1",children:[e.jsx(Le,{className:"h-4 w-4"}),"View Details"]}),s.status==="assigned"||s.status==="inProgress"?e.jsxs(e.Fragment,{children:[e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>X(`/site-visits/${s.id}/edit`),className:"flex items-center gap-1",children:[e.jsx(Te,{className:"h-4 w-4"}),"Review & Edit"]}),e.jsxs(h,{size:"sm",onClick:()=>{y(s.id),b(""),q(!0)},className:"flex items-center gap-1 bg-green-600 hover:bg-green-700",children:[e.jsx(W,{className:"h-4 w-4"}),"Verify"]}),e.jsxs(h,{size:"sm",variant:"destructive",onClick:()=>{y(s.id),b(""),B(!0)},className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-4 w-4"}),"Reject"]})]}):null]})]})},s.id);return he?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading sites..."})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between bg-blue-600 text-white p-5 rounded-2xl shadow",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Site Verification"}),e.jsx("p",{className:"mt-1 text-blue-100/90",children:"Review and verify sites assigned to you"})]}),e.jsxs(h,{onClick:()=>X(-1),className:"flex items-center gap-2 bg-white text-blue-600 hover:bg-white/90",children:[e.jsx(Me,{className:"h-4 w-4"}),"Back"]})]}),e.jsxs(Oe,{value:G,onValueChange:se,className:"space-y-6",children:[e.jsxs(Re,{className:"grid w-full grid-cols-5 gap-2",children:[e.jsxs(F,{value:"new",className:"flex items-center justify-center gap-2 rounded-md py-2 px-3 bg-gray-100 hover:bg-gray-200 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-sm",children:[e.jsx("span",{children:"New Sites"}),e.jsx(S,{variant:"secondary",children:ve})]}),e.jsxs(F,{value:"verified",className:"flex items-center justify-center gap-2 rounded-md py-2 px-3 bg-gray-100 hover:bg-gray-200 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-sm",children:[e.jsx("span",{children:"Verified"}),e.jsx(S,{variant:"secondary",children:ge})]}),e.jsxs(F,{value:"approved",className:"flex items-center justify-center gap-2 rounded-md py-2 px-3 bg-gray-100 hover:bg-gray-200 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-sm",children:[e.jsx("span",{children:"Approved"}),e.jsx(S,{variant:"secondary",children:Ne})]}),e.jsxs(F,{value:"completed",className:"flex items-center justify-center gap-2 rounded-md py-2 px-3 bg-gray-100 hover:bg-gray-200 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-sm",children:[e.jsx("span",{children:"Completed"}),e.jsx(S,{variant:"secondary",children:_e})]}),e.jsxs(F,{value:"rejected",className:"flex items-center justify-center gap-2 rounded-md py-2 px-3 bg-gray-100 hover:bg-gray-200 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-sm",children:[e.jsx("span",{children:"Rejected"}),e.jsx(S,{variant:"secondary",children:ye})]})]}),e.jsx(O,{value:"new",className:"space-y-4",children:e.jsxs(k,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(z,{children:"New Sites for Verification"}),e.jsxs("div",{className:"relative w-full sm:w-auto max-w-sm",children:[e.jsx(T,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(I,{type:"search",placeholder:"Search sites...",className:"pl-8 w-full sm:w-[300px]",value:v,onChange:s=>C(s.target.value)})]})]})}),e.jsx(D,{children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Pe,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:v?"No sites match your search.":"No new sites assigned to you for verification."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:V.map(s=>L(s,!0))}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(r-1)*g+1," - ",Math.min(r*g,x.length)," of ",x.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.max(1,s-1)),disabled:r===1,children:[e.jsx(A,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"text-sm",children:["Page ",r," of ",u]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.min(u,s+1)),disabled:r===u,children:["Next",e.jsx(E,{className:"h-4 w-4"})]})]})]})]})})]})}),e.jsx(O,{value:"verified",className:"space-y-4",children:e.jsxs(k,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(z,{children:"Verified Sites"}),e.jsxs("div",{className:"relative w-full sm:w-auto max-w-sm",children:[e.jsx(T,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(I,{type:"search",placeholder:"Search sites...",className:"pl-8 w-full sm:w-[300px]",value:v,onChange:s=>C(s.target.value)})]})]})}),e.jsx(D,{children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:v?"No sites match your search.":"No verified sites yet."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:V.map(s=>L(s,!1))}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(r-1)*g+1," - ",Math.min(r*g,x.length)," of ",x.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.max(1,s-1)),disabled:r===1,children:[e.jsx(A,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"text-sm",children:["Page ",r," of ",u]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.min(u,s+1)),disabled:r===u,children:["Next",e.jsx(E,{className:"h-4 w-4"})]})]})]})]})})]})}),e.jsx(O,{value:"approved",className:"space-y-4",children:e.jsxs(k,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(z,{children:"Approved Sites"}),e.jsxs("div",{className:"relative w-full sm:w-auto max-w-sm",children:[e.jsx(T,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(I,{type:"search",placeholder:"Search sites...",className:"pl-8 w-full sm:w-[300px]",value:v,onChange:s=>C(s.target.value)})]})]})}),e.jsx(D,{children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:v?"No sites match your search.":"Approved sites will appear here."}),!v&&e.jsx("p",{className:"text-sm mt-2",children:"This feature is coming soon."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:V.map(s=>L(s,!1))}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(r-1)*g+1," - ",Math.min(r*g,x.length)," of ",x.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.max(1,s-1)),disabled:r===1,children:[e.jsx(A,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"text-sm",children:["Page ",r," of ",u]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.min(u,s+1)),disabled:r===u,children:["Next",e.jsx(E,{className:"h-4 w-4"})]})]})]})]})})]})}),e.jsx(O,{value:"completed",className:"space-y-4",children:e.jsxs(k,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(z,{children:"Completed Sites"}),e.jsxs("div",{className:"relative w-full sm:w-auto max-w-sm",children:[e.jsx(T,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(I,{type:"search",placeholder:"Search sites...",className:"pl-8 w-full sm:w-[300px]",value:v,onChange:s=>C(s.target.value)})]})]})}),e.jsx(D,{children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:v?"No sites match your search.":"Completed sites will appear here."}),!v&&e.jsx("p",{className:"text-sm mt-2",children:"This feature is coming soon."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:V.map(s=>L(s,!1))}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(r-1)*g+1," - ",Math.min(r*g,x.length)," of ",x.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.max(1,s-1)),disabled:r===1,children:[e.jsx(A,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"text-sm",children:["Page ",r," of ",u]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.min(u,s+1)),disabled:r===u,children:["Next",e.jsx(E,{className:"h-4 w-4"})]})]})]})]})})]})}),e.jsx(O,{value:"rejected",className:"space-y-4",children:e.jsxs(k,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(z,{children:"Rejected Sites"}),e.jsxs("div",{className:"relative w-full sm:w-auto max-w-sm",children:[e.jsx(T,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(I,{type:"search",placeholder:"Search sites...",className:"pl-8 w-full sm:w-[300px]",value:v,onChange:s=>C(s.target.value)})]})]})}),e.jsx(D,{children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(U,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:v?"No sites match your search.":"No rejected sites."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:V.map(s=>L(s,!1))}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(r-1)*g+1," - ",Math.min(r*g,x.length)," of ",x.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.max(1,s-1)),disabled:r===1,children:[e.jsx(A,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"text-sm",children:["Page ",r," of ",u]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>N(s=>Math.min(u,s+1)),disabled:r===u,children:["Next",e.jsx(E,{className:"h-4 w-4"})]})]})]})]})})]})})]}),e.jsx(ne,{open:fe,onOpenChange:q,children:e.jsxs(re,{children:[e.jsx(le,{children:e.jsx(de,{children:"Verify Site"})}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"mb-4",children:"Are you sure you want to verify this site?"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"verification-notes",className:"text-sm font-medium mb-2 block",children:"Verification Notes (Optional)"}),e.jsx(oe,{id:"verification-notes",placeholder:"Add any notes about the verification...",value:H,onChange:s=>b(s.target.value),className:"mt-1",rows:4})]})]}),e.jsxs(ce,{children:[e.jsx(h,{variant:"outline",onClick:()=>{q(!1),b(""),y(null)},children:"Cancel"}),e.jsxs(h,{onClick:()=>{Q&&Ce(Q,H)},className:"bg-green-600 hover:bg-green-700",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Confirm Verification"]})]})]})}),e.jsx(ne,{open:pe,onOpenChange:B,children:e.jsxs(re,{children:[e.jsx(le,{children:e.jsx(de,{children:"Reject Site"})}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"mb-4",children:"Are you sure you want to reject this site?"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"rejection-notes",className:"text-sm font-medium mb-2 block",children:"Rejection Notes (Optional)"}),e.jsx(oe,{id:"rejection-notes",placeholder:"Add any notes about the rejection...",value:H,onChange:s=>b(s.target.value),className:"mt-1",rows:4})]})]}),e.jsxs(ce,{children:[e.jsx(h,{variant:"outline",onClick:()=>{B(!1),b(""),y(null)},children:"Cancel"}),e.jsxs(h,{onClick:()=>{Q&&Se(Q,H)},variant:"destructive",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Confirm Rejection"]})]})]})})]})};export{as as default};
