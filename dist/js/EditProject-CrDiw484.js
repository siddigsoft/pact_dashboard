import{r as c,j as t,N as h}from"./react-core-B8kFjp2k.js";import{F as x,u as f,a as m}from"./index-PwDgWEVM.js";import{P as v}from"./ProjectForm-DvLk3ngM.js";import{A as b,a as g,b as N}from"./alert-BXWNuJnD.js";import{bI as P,bo as y}from"./vendor-VlxgVHMv.js";import"./docs-D2Yi4cpO.js";import"./react-dom-BLwj5vIO.js";import"./jspdf-rld7HkB6.js";import"./router-CKy9yO3R.js";import"./query-CJ0Bt4ph.js";import"./supabase-CwPDIVMD.js";import"./xlsx-CBxwqXDA.js";import"./date-utils-YarVESQS.js";import"./forms-CESK2FDA.js";import"./radix-ui-C2DV4xtt.js";import"./radix-dialogs-CnlmQBMC.js";import"./radix-menus-CPezQVZk.js";import"./textarea-BpQMf5eL.js";import"./form-BT_tmI7p.js";import"./label-C4lDws8j.js";import"./select-CXX5Q_V1.js";import"./popover-BSK_FA51.js";import"./calendar-DEyRSxJX.js";import"./ActivityManager-lZ-YmBoR.js";import"./collapsible-DNmzDQGQ.js";import"./ActivityForm-DxwKkf_I.js";import"./toggle-DVFO8bcr.js";import"./TeamCompositionManager-DL5fiHxh.js";import"./table-CZ8ZB6wW.js";import"./sudanStates-CkkbYUnU.js";const et=()=>{const{id:i}=P(),s=y(),{getProjectById:l,updateProject:p,fetchProjects:u,loading:e,projects:a}=x(),[o,d]=c.useState(void 0),{toast:n}=f();c.useEffect(()=>{a.length===0&&!e&&u()},[]),c.useEffect(()=>{if(!i){d(void 0);return}const r=l(i);d(r),!r&&!e&&a.length>0&&(n({title:"Project Not Found",description:"The project could not be found. You will be redirected to the projects page.",variant:"destructive"}),setTimeout(()=>{s("/projects")},2e3))},[i,a,e]);const j=async r=>{try{await p(r),s(`/projects/${r.id}`),n({title:"Project Updated",description:"The project has been updated successfully.",variant:"success"})}catch{n({title:"Update Failed",description:"There was an error updating the project. Please try again.",variant:"destructive"})}};return e&&!o?t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[t.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20 animate-[spin_3s_linear_infinite]"}),t.jsx("div",{className:"absolute inset-[6px] rounded-full border-4 border-t-primary animate-[spin_2s_linear_infinite]"})]}),t.jsx("p",{className:"text-muted-foreground animate-pulse",children:"Loading project details..."})]})}):!o&&!e?t.jsxs(b,{children:[t.jsx(g,{children:"Project Not Found"}),t.jsxs(N,{children:["The project you are trying to edit does not exist or has been removed.",t.jsx("div",{className:"mt-4",children:t.jsx(m,{variant:"outline",onClick:()=>s("/projects"),children:"Back to Projects"})})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx(m,{variant:"ghost",size:"icon",onClick:()=>s(`/projects/${i}`),className:"hover:bg-muted",children:t.jsx(h,{className:"h-4 w-4"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Edit Project"}),t.jsx("p",{className:"text-muted-foreground",children:"Update project details and information"})]})]}),o&&t.jsx(v,{onSubmit:j,initialData:o,isEditing:!0})]})};export{et as default};
