import{r as l,j as e,aZ as v,a_ as N,$ as u}from"./react-core-B8kFjp2k.js";import{D as b,l as E,m as D,n as L,a4 as j,a as h}from"./index-PwDgWEVM.js";import{aj as P}from"./radix-ui-C2DV4xtt.js";const f=P,T=({fileUrl:s,fileName:a,open:t,onOpenChange:p})=>{const[r,o]=l.useState(!0),[m,x]=l.useState(null);l.useEffect(()=>{t&&(o(!0),x(null))},[t]),l.useEffect(()=>{if(!t||!s)return;const w=setTimeout(()=>{r&&o(!1)},5e3);return()=>clearTimeout(w)},[t,s,r]);const i=()=>{o(!1)},n=()=>{o(!1),x(`Failed to load preview for ${a}`)},g=a.toLowerCase().endsWith(".pdf"),c=/\.(jpg|jpeg|png|gif|bmp|webp|svg)$/i.test(a),d=/\.(mp4|webm|ogg|mov)$/i.test(a);return e.jsx(b,{open:t,onOpenChange:p,children:e.jsxs(E,{className:"max-w-3xl overflow-y-auto",children:[e.jsx(D,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[c&&e.jsx(v,{className:"h-5 w-5"}),d&&e.jsx(N,{className:"h-5 w-5"}),!c&&!d&&e.jsx(u,{className:"h-5 w-5"}),a]})}),e.jsx("div",{className:"mt-4",children:s?e.jsxs("div",{className:"overflow-hidden rounded-lg border",children:[r&&e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(j,{className:"h-[400px] w-full"})}),g?e.jsxs("div",{className:"relative",children:[e.jsx("iframe",{src:s,className:"w-full h-[600px]",title:a,onLoad:i,onError:n,referrerPolicy:"no-referrer"}),r&&e.jsx("div",{className:"absolute inset-0",children:e.jsx(j,{className:"h-full w-full"})})]}):c?e.jsx(f,{ratio:16/9,children:e.jsx("img",{src:s,alt:a,className:"w-full h-full object-contain",onLoad:i,onError:n,referrerPolicy:"no-referrer"})}):d?e.jsx(f,{ratio:16/9,children:e.jsx("video",{src:s,controls:!0,className:"w-full h-full",onLoadedData:i,onError:n})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{children:"Preview not available for this file type."}),e.jsx(h,{variant:"outline",className:"mt-4",onClick:()=>window.open(s,"_blank"),children:"Download File"})]}),m&&e.jsxs("div",{className:"p-8 text-center text-destructive",children:[e.jsx("p",{children:m}),e.jsx(h,{variant:"outline",className:"mt-4",onClick:()=>window.open(s,"_blank"),children:"Open in New Tab"})]})]}):e.jsxs("div",{className:"text-center p-12 border rounded-lg bg-muted/30",children:[e.jsx(u,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Preview not available"}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"The file URL is missing or invalid"})]})})]})})};export{T as P};
