import{r as h,j as e,aI as X,aO as z,a2 as $,_ as q,$ as _,ag as Y,I as F,p as ee,a7 as se}from"./react-core-B8kFjp2k.js";import{u as L,I as U,a as b,U as K,C as w,f as G,g as W,h as J,b as S,r as H,F as te,e as ae,T as re,i as ie,j as E,k as Z}from"./index-PwDgWEVM.js";import{F as ne}from"./FieldTeamMapPermissions-Rk88jEyR.js";import{M as le}from"./MMPSiteInformation-Bke1UQxS.js";import{M as oe}from"./MMPVerificationHeader-BpTrG5gu.js";import{P as de}from"./PermitPreviewDialog-B2XKKnFF.js";import{T as ce}from"./textarea-BpQMf5eL.js";import{F as xe,a as k,b as I,e as A,c as V,d as D}from"./form-BT_tmI7p.js";import{u as me}from"./forms-CESK2FDA.js";import{M as ue}from"./MMPOverallInformation-CT39nI2-.js";import{g as O,a as he,d as je}from"./mmpUtils-CTST1Zxt.js";import{bo as Q,by as T,bI as fe}from"./vendor-VlxgVHMv.js";import{P as ge,a as be,b as B,c as pe,d as ve,e as Ne}from"./pagination-wW-pUaO1.js";import{T as Me,a as Pe,b as R,c as P,d as we,e as v}from"./table-CZ8ZB6wW.js";import{P as Ce}from"./progress-vMwTbqUI.js";import{S as ye,a as Se,b as ke,c as Ie,d as Ae}from"./select-CXX5Q_V1.js";import{L as Ve}from"./label-C4lDws8j.js";import"./docs-D2Yi4cpO.js";import"./react-dom-BLwj5vIO.js";import"./jspdf-rld7HkB6.js";import"./router-CKy9yO3R.js";import"./query-CJ0Bt4ph.js";import"./supabase-CwPDIVMD.js";import"./xlsx-CBxwqXDA.js";import"./date-utils-YarVESQS.js";import"./radix-ui-C2DV4xtt.js";import"./radix-dialogs-CnlmQBMC.js";import"./radix-menus-CPezQVZk.js";import"./sudanStates-CkkbYUnU.js";import"./MMPStatusBadge-CjxSGCNB.js";const De=({mmpFile:s,onUpdateMMP:d})=>{const[l,n]=h.useState(!1),{toast:x}=L(),t=me({defaultValues:{name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",mmpId:(s==null?void 0:s.mmpId)||"",entries:(s==null?void 0:s.entries)||0}}),c=()=>{l&&t.reset({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",mmpId:(s==null?void 0:s.mmpId)||"",entries:(s==null?void 0:s.entries)||0}),n(!l)},m=r=>{if(s.id){const i={...s,name:r.name,description:r.description,mmpId:r.mmpId,entries:r.entries};d(s.id,i),n(!1),x({title:"MMP Updated",description:"The MMP information has been successfully updated."})}};return e.jsx(e.Fragment,{children:l?e.jsx(xe,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(m),className:"space-y-4 border p-4 rounded-md",children:[e.jsx(k,{control:t.control,name:"name",render:({field:r})=>e.jsxs(I,{children:[e.jsx(A,{children:"MMP Name"}),e.jsx(V,{children:e.jsx(U,{...r})}),e.jsx(D,{})]})}),e.jsx(k,{control:t.control,name:"description",render:({field:r})=>e.jsxs(I,{children:[e.jsx(A,{children:"Description"}),e.jsx(V,{children:e.jsx(ce,{...r})}),e.jsx(D,{})]})}),e.jsx(k,{control:t.control,name:"mmpId",render:({field:r})=>e.jsxs(I,{children:[e.jsx(A,{children:"MMP ID"}),e.jsx(V,{children:e.jsx(U,{...r})}),e.jsx(D,{})]})}),e.jsx(k,{control:t.control,name:"entries",render:({field:r})=>e.jsxs(I,{children:[e.jsx(A,{children:"Total Entries"}),e.jsx(V,{children:e.jsx(U,{type:"number",...r,onChange:i=>r.onChange(parseInt(i.target.value)||0)})}),e.jsx(D,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx(b,{variant:"outline",type:"button",onClick:c,children:"Cancel"}),e.jsxs(b,{type:"submit",className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Save Changes"]})]})]})}):e.jsxs(e.Fragment,{children:[s&&e.jsx(ue,{mmpFile:s,editable:!1}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(b,{variant:"outline",onClick:c,className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Quick Edit"]})})]})})},Te=({mmpFile:s})=>{const d=Q();L();const l=O(s),n=(s==null?void 0:s.entries)||0,x=he(s),t=(s==null?void 0:s.processedEntries)||0,c=x>0?Math.round(t/x*100):0,m=l>0,r=()=>{d(`/mmp/${s.id}/edit`)};return e.jsxs("div",{className:"mt-8 border rounded-xl p-6 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/10 dark:to-indigo-900/10",children:[e.jsxs("h4",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300 mb-4 flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Site Processing Status"]}),!m&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 dark:bg-amber-900/20 dark:border-amber-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-800 dark:text-amber-300",children:[e.jsx(q,{className:"h-5 w-5"}),e.jsx("p",{className:"font-medium",children:"No site entries found"})]}),e.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-400 mt-1",children:["This MMP has ",n," declared entries but no site data is available yet. You may need to update the MMP with site information before verification."]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-blue-100 dark:border-blue-800/30",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"Total Entries"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-300",children:x}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l>0?"From site data":"Declared"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-blue-100 dark:border-blue-800/30",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"Site Entries"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-300",children:l}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Available site details"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-blue-100 dark:border-blue-800/30",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"Processed Sites"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-300",children:t}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Completed verification"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-blue-700 dark:text-blue-400 mb-2",children:[e.jsx("span",{children:"Processing Progress"}),e.jsxs("span",{children:[c,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-100 dark:bg-blue-900/30 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})})]}),e.jsx("div",{className:"mt-6 flex gap-4 justify-end",children:e.jsxs(b,{variant:"outline",onClick:r,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Edit MMP"]})}),!m&&e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 p-4 rounded-lg border border-blue-100 dark:border-blue-800/30",children:[e.jsx("h5",{className:"font-medium text-blue-800 dark:text-blue-400 mb-2",children:"Next Steps"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"min-w-4 mt-0.5",children:"1."}),e.jsx("p",{children:"Upload or edit the MMP with site information"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"min-w-4 mt-0.5",children:"2."}),e.jsx("p",{children:"Define the number of sites and their details"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"min-w-4 mt-0.5",children:"3."}),e.jsx("p",{children:"Return to verification once site data is available"})]})]})]})]})},Ue=({siteEntries:s,onPreviewDocument:d,itemsPerPage:l=5})=>{const[n,x]=h.useState(1),t=Math.ceil(s.length/l),c=n*l,m=c-l,r=s.slice(m,c),i=a=>x(a),f=()=>{n<t&&x(n+1)},j=()=>{n>1&&x(n-1)},C=[],g=5;let p=Math.max(1,n-Math.floor(g/2)),N=Math.min(t,p+g-1);N-p+1<g&&(p=Math.max(1,N-g+1));for(let a=p;a<=N;a++)C.push(a);return e.jsxs("div",{className:"mt-8 border rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Site Entries"}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(Me,{children:[e.jsx(Pe,{children:e.jsxs(R,{children:[e.jsx(P,{children:"Site Code"}),e.jsx(P,{children:"MMP Name"}),e.jsx(P,{children:"Site Name"}),e.jsx(P,{children:"Status"}),e.jsx(P,{children:"State"}),e.jsx(P,{children:"Main Activity"}),e.jsx(P,{className:"text-center",children:"Actions"})]})}),e.jsxs(we,{children:[r.map((a,M)=>{var o;return e.jsxs(R,{className:M%2===0?"bg-white":"bg-muted/20",children:[e.jsx(v,{children:a.siteCode}),e.jsx(v,{children:a.mmpName||a.mmp_name||((o=a.mmpFiles)==null?void 0:o.name)||"â€”"}),e.jsx(v,{children:a.siteName}),e.jsx(v,{children:a.status||"Pending"}),e.jsx(v,{children:a.state||"N/A"}),e.jsx(v,{children:a.mainActivity||a.siteActivity||"N/A"}),e.jsx(v,{className:"text-center",children:e.jsxs(b,{variant:"ghost",size:"sm",onClick:()=>d(a),className:"h-8 px-2",children:[e.jsx(_,{className:"h-4 w-4 mr-1"}),"Preview"]})})]},a.id||M)}),r.length===0&&e.jsx(R,{children:e.jsx(v,{colSpan:7,className:"text-center py-4 text-muted-foreground",children:"No site entries available"})})]})]}),t>1&&e.jsxs("div",{className:"mt-4",children:[e.jsx(ge,{children:e.jsxs(be,{children:[e.jsx(B,{children:e.jsx(pe,{onClick:j,className:n===1?"pointer-events-none opacity-50":"cursor-pointer"})}),C.map(a=>e.jsx(B,{children:e.jsx(ve,{onClick:()=>i(a),isActive:n===a,className:"cursor-pointer",children:a})},a)),e.jsx(B,{children:e.jsx(Ne,{onClick:f,className:n===t?"pointer-events-none opacity-50":"cursor-pointer"})})]})}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-2",children:["Showing ",m+1,"-",Math.min(c,s.length)," of ",s.length," entries"]})]})]})]})},Ee=({mmpFile:s})=>{const{updateMMP:d}=K(),[l,n]=h.useState(!1),[x,t]=h.useState({name:""});O(s);const c=r=>{let i=null;if(s.permits&&Array.isArray(s.permits.documents)&&s.permits.documents.length>0)i=s.permits.documents[0].fileUrl;else if(s.permits&&Array.isArray(s.permits.statePermits)){const f=s.permits.statePermits.flatMap(j=>j.documents).filter(j=>j&&j.fileUrl);f.length>0&&(i=f[0].fileUrl)}i||(i="data:application/pdf;base64,JVBERi0xLjQKJcOkw7zDtsOfCjIgMCBvYmoKPDwvTGVuZ3RoIDMgMCBSL0ZpbHRlci9GbGF0ZURlY29kZT4+CnN0cmVhbQp4nDPQM1Qo5ypUMABCM0MjBQsLEz1DPQtDoEgSF5euk58HhMucFAr5AFr0BvIKZW5kc3RyZWFtCmVuZG9iagoKMyAwIG9iago0OAplbmRvYmoKCjUgMCBvYmoKPDwKPj4KZW5kb2JqCgo2IDAgb2JqCjw8L0ZvbnQgNSAwIFIKL1Byb2NTZXRbL1BERi9UZXh0XT4+CmVuZG9iagoKMSAwIG9iago8PC9UeXBlL1BhZ2UvUGFyZW50IDQgMCBSL1Jlc291cmNlcyA2IDAgUi9NZWRpYUJveFswIDAgMzYwIDM2MF0vR3JvdXA8PC9TL1RyYW5zcGFyZW5jeS9DUy9EZXZpY2VSR0IvSSB0cnVlPj4vQ29udGVudHMgMiAwIFI+PgplbmRvYmoKCjQgMCBvYmoKPDwvVHlwZS9QYWdlcy9SZXNvdXJjZXMgNiAwIFIvTWVkaWFCb3hbIDAgMCAzNjAgMzYwIF0vS2lkc1sgMSAwIFIgXS9Db3VudCAxPj4KZW5kb2JqCgo3IDAgb2JqCjw8L1R5cGUvQ2F0YWxvZy9QYWdlcyA0IDAgUgovTWV0YWRhdGEgOCAwIFIKPj4KZW5kb2JqCgo4IDAgb2JqCjw8L0xlbmd0aCAyMzk+PnN0cmVhbQogCmVuZHN0cmVhbQplbmRvYmoKCjkgMCBvYmoKPDwvVHlwZS9YUmVmCi9CYXNlIDAKL0xlbmd0aCAzNwovU2l6ZSAxMAovRmlsdGVyL0ZsYXRlRGVjb2RlCj4+c3RyZWFtCnicY2AAgv//GRgYGll1GZg2MzCYOwoxMH9jYPBjAACv6wR+CmVuZHN0cmVhbQplbmRvYmoKCnN0YXJ0eHJlZgo2NDEKJSVFT0YK"),t({url:i,name:`Site ${r.siteCode||"Unknown"} - ${r.siteName||"Unnamed Site"} Document`}),n(!0)},m=(r,i)=>{d&&d(r,i)};return e.jsxs(w,{className:"border-blue-100 dark:border-blue-800 shadow-sm",children:[e.jsxs(G,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[e.jsx(W,{className:"text-blue-800 dark:text-blue-300",children:"MMP Overview"}),e.jsx(J,{className:"text-blue-600/80 dark:text-blue-300/80",children:"Review basic MMP information before verification"})]}),e.jsxs(S,{className:"space-y-8 p-6",children:[e.jsx(De,{mmpFile:s,onUpdateMMP:m}),e.jsx(Te,{mmpFile:s}),s.siteEntries&&s.siteEntries.length>0?e.jsx(Ue,{siteEntries:s.siteEntries,onPreviewDocument:c,itemsPerPage:5}):e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-6 rounded-lg text-center",children:[e.jsx("p",{className:"text-amber-800 dark:text-amber-300 font-medium",children:"No site entries found"}),e.jsxs("p",{className:"text-amber-700 dark:text-amber-400 mt-2",children:["This MMP has ",s.entries||0," declared entries but no site data is available yet. You may need to edit the MMP to add site information."]})]})]}),e.jsx(de,{open:l,onOpenChange:n,fileUrl:x.url,fileName:x.name})]})},Ze=({mmpFile:s,verificationProgress:d,onFinalizeVerification:l,onGoBack:n})=>{var c,m;const t=(()=>{if(s.permits&&typeof s.permits=="object"&&"documents"in s.permits&&Array.isArray(s.permits.documents)){const r=s.permits;return{total:r.documents.length,verified:r.documents.filter(i=>"status"in i?i.status==="verified":!1).length||0}}return s.permits&&Array.isArray(s.permits)?{total:s.permits.length,verified:s.permits.filter(r=>r.status==="verified").length||0}:{total:0,verified:0}})();return e.jsxs(w,{children:[e.jsxs(G,{children:[e.jsx(W,{children:"Verification Summary"}),e.jsx(J,{children:"Review overall verification status"})]}),e.jsx(S,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Permit Verification"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:["Total Permits: ",t.total]}),e.jsxs("p",{children:["Verified: ",t.verified]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Cooperating Partner Verification"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:["Status: ",((c=s==null?void 0:s.cpVerification)==null?void 0:c.verificationStatus)||"Pending"]}),e.jsxs("p",{children:["Last Updated: ",(m=s==null?void 0:s.cpVerification)!=null&&m.verifiedAt?new Date(s.cpVerification.verifiedAt).toLocaleDateString():"Not verified"]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Overall Progress"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:["Progress: ",d,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${d}%`}})})]})]})]})}),e.jsxs(H,{className:"flex justify-between border-t mt-6",children:[e.jsx(b,{variant:"outline",onClick:n,children:"Cancel"}),e.jsxs(b,{onClick:l,disabled:d<100,className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Finalize Verification"]})]})]})};function Be(){const[s,d]=h.useState(null),[l,n]=h.useState(!1),[x,t]=h.useState(0),[c,m]=h.useState(!1),[r,i]=h.useState(null),[f,j]=h.useState(""),{uploadMMP:C}=K(),{projects:g}=te(),p=Q(),N=o=>{if(o.target.files&&o.target.files[0]){const u=o.target.files[0];d(u),m(!1),t(0),i(null)}},a=()=>{t(0);const o=setInterval(()=>{t(u=>u>=90?(clearInterval(o),90):u+5)},300);return o},M=async()=>{if(!s){T.error("Please select a file to upload");return}n(!0),i(null);const o=a();try{const u=await C(s,f);clearInterval(o),u?(t(100),m(!0),T.success("File uploaded successfully"),setTimeout(()=>{d(null),j("");const y=document.getElementById("mmp-file");y&&(y.value=""),p("/mmp")},2e3)):(t(0),i("Upload failed - please try again"),T.error("Upload failed"))}catch(u){clearInterval(o),t(0);const y=u instanceof Error?u.message:"Unknown error";i(y),T.error(`Upload error: ${y}`)}finally{n(!1)}};return e.jsxs(w,{className:"w-full max-w-md mx-auto",children:[e.jsx(G,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Upload MMP File"]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Project"}),e.jsxs(ye,{value:f,onValueChange:j,disabled:l,children:[e.jsx(Se,{children:e.jsx(ke,{placeholder:"Select a project"})}),e.jsx(Ie,{children:g.map(o=>e.jsx(Ae,{value:o.id,children:o.name},o.id))})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(U,{id:"mmp-file",type:"file",onChange:N,accept:".csv,.xlsx,.xls",className:"flex-grow",disabled:l})}),s&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Selected file: ",e.jsx("span",{className:"font-medium",children:s.name})," (",(s.size/1024).toFixed(1)," KB)"]}),l&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{value:x,className:"h-2"}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:x<100?"Uploading...":"Processing..."})]}),c&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 bg-green-50 p-2 rounded",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:"Upload complete!"})]}),r&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:r})]})]})}),e.jsx(H,{children:e.jsx(b,{onClick:M,disabled:!s||!f||l,className:"w-full flex items-center justify-center gap-2",children:l?"Uploading...":c?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-4 w-4"}),"Uploaded"]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4"}),"Upload MMP File"]})})})]})}const hs=()=>{const{id:s}=fe(),d=Q(),{getMmpById:l,updateMMP:n,mmpFiles:x}=K(),{currentUser:t}=ae(),{toast:c}=L(),[m,r]=h.useState(!0),[i,f]=h.useState(null),[j,C]=h.useState(0);h.useEffect(()=>{if(s){je(x,"MMPVerification Page");const a=l(s);if(a){f(a),O(a);const M=a.processedEntries||0,o=a.entries||0,u=o>0?Math.round(M/o*100):0;C(u)}else c({title:"MMP Not Found",description:`The MMP file with ID ${s} could not be found.`,variant:"destructive"}),d("/mmp");r(!1)}},[s,l,d,c,x]);const g=()=>d("/mmp"),p=()=>{if(!i||!s)return;const a=new Date().toISOString(),o={status:"verified",verifiedBy:(t==null?void 0:t.username)||(t==null?void 0:t.fullName)||(t==null?void 0:t.name)||(t==null?void 0:t.email)||(t==null?void 0:t.id)||"System",verifiedAt:a,workflow:{...i.workflow||{},currentStage:"verified",lastUpdated:a}};n(s,o),f(u=>u&&{...u,...o}),c({title:"MMP Verification Complete",description:"The MMP has been successfully verified."}),d(`/mmp/${s}/view`)},N=()=>{s&&d(`/mmp/${s}/detailed-verification`)};return m?e.jsx("div",{className:"container mx-auto p-4",children:e.jsx(w,{children:e.jsxs("div",{className:"p-8 flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"}),e.jsx("p",{className:"ml-3",children:"Loading verification information..."})]})})}):i?s?e.jsx(ne,{resource:"mmp",action:"approve",children:e.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[e.jsx(oe,{mmpFile:i,verificationProgress:j,onGoBack:g}),e.jsxs(re,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ie,{className:"grid w-full grid-cols-3",children:[e.jsx(E,{value:"overview",children:"Overview"}),e.jsx(E,{value:"site-info",children:"Site Information"}),e.jsx(E,{value:"summary",children:"Summary"})]}),e.jsx(Z,{value:"overview",children:e.jsx(Ee,{mmpFile:i})}),e.jsx(Z,{value:"site-info",children:e.jsx(w,{children:e.jsx(S,{className:"p-6",children:e.jsx(le,{mmpFile:i,showVerificationButton:!0,onUpdateMMP:a=>n(s,a)})})})}),e.jsx(Z,{value:"summary",children:e.jsx(w,{children:e.jsxs(S,{className:"p-6",children:[e.jsx(Ze,{mmpFile:i,verificationProgress:j,onFinalizeVerification:p,onGoBack:g}),e.jsx("div",{className:"mt-6 border-t pt-4",children:e.jsx(b,{variant:"outline",onClick:N,className:"w-full",children:"Go to Detailed Verification (Permits & Cooperating Partner)"})})]})})})]})]})}):e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"MMP Upload and Verification"}),e.jsx(Be,{})]}):e.jsx("div",{className:"container mx-auto p-4",children:e.jsx(w,{children:e.jsxs("div",{className:"p-8 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-red-500 bg-red-100 p-3 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-bold",children:"MMP File Not Found"}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["The requested MMP file (ID: ",s,") could not be found or accessed."]}),e.jsx(b,{variant:"default",onClick:g,children:"Return to MMP List"})]})})})};export{hs as default};
